{"version":3,"file":"MessageSearch.js","sources":["../src/modules/MessageSearch/index.tsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport './index.scss';\n\nimport MessageSearch, { MessageSearchUIProps } from './components/MessageSearchUI';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport Icon, { IconTypes, IconColors } from '../../ui/Icon';\nimport IconButton from '../../ui/IconButton';\nimport Label, { LabelTypography, LabelColors } from '../../ui/Label';\nimport Loader from '../../ui/Loader';\nimport { MessageSearchProvider, MessageSearchProviderProps } from './context/MessageSearchProvider';\n\nexport interface MessageSearchPannelProps extends\n  MessageSearchUIProps, MessageSearchProviderProps {\n  onResultClick?: (message) => void;\n  onCloseClick?: () => void;\n}\n\nconst COMPONENT_CLASS_NAME = 'sendbird-message-search-pannel';\n\nfunction MessageSearchPannel(props: MessageSearchPannelProps): JSX.Element {\n  const {\n    channelUrl,\n    onResultClick,\n    onCloseClick,\n    messageSearchQuery,\n    renderPlaceHolderError,\n    renderPlaceHolderLoading,\n    renderPlaceHolderNoString,\n    renderPlaceHolderEmptyList,\n    renderSearchItem,\n  } = props;\n\n  const [searchString, setSearchString] = useState('');\n  const [inputString, setInputString] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  let timeout: any = null;\n  useEffect(() => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      setSearchString(inputString);\n      setLoading(true);\n      timeout = null;\n    }, 500);\n  }, [inputString]);\n\n  const handleOnChangeInputString = (e) => {\n    setInputString(e.target.value);\n  };\n\n  const handleOnResultLoaded = () => {\n    setLoading(false);\n  };\n\n  const handleOnClickResetStringButton = (e) => {\n    e.stopPropagation();\n    setInputString('');\n    setSearchString('');\n  };\n\n  return (\n    <div className={COMPONENT_CLASS_NAME}>\n      <div className={`${COMPONENT_CLASS_NAME}__header`}>\n        <Label\n          className={`${COMPONENT_CLASS_NAME}__header__title`}\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {stringSet.SEARCH_IN_CHANNEL}\n        </Label>\n        <IconButton\n          className={`${COMPONENT_CLASS_NAME}__header__close-button`}\n          width=\"32px\"\n          height=\"32px\"\n          onClick={onCloseClick}\n        >\n          <Icon\n            type={IconTypes.CLOSE}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            width=\"22px\"\n            height=\"22px\"\n          />\n        </IconButton>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__input`}>\n        <div className={`${COMPONENT_CLASS_NAME}__input__container`}>\n            <Icon\n              className={`${COMPONENT_CLASS_NAME}__input__container__search-icon`}\n              type={IconTypes.SEARCH}\n              fillColor={IconColors.ON_BACKGROUND_3}\n              width=\"24px\"\n              height=\"24px\"\n            />\n            <input\n              className={`${COMPONENT_CLASS_NAME}__input__container__input-area`}\n              placeholder={stringSet.SEARCH}\n              value={inputString}\n              onChange={handleOnChangeInputString}\n            />\n            {\n              inputString && loading && (\n                <Loader\n                  className={`${COMPONENT_CLASS_NAME}__input__container__spinner`}\n                  width=\"20px\"\n                  height=\"20px\"\n                >\n                  <Icon\n                    type={IconTypes.SPINNER}\n                    fillColor={IconColors.PRIMARY}\n                    width=\"20px\"\n                    height=\"20px\"\n                  />\n                </Loader>\n              )\n            }\n            {\n              !loading && inputString && (\n                <Icon\n                  className={`${COMPONENT_CLASS_NAME}__input__container__reset-input-button`}\n                  type={IconTypes.REMOVE}\n                  fillColor={IconColors.ON_BACKGROUND_3}\n                  width=\"20px\"\n                  height=\"20px\"\n                  onClick={handleOnClickResetStringButton}\n                />\n              )\n            }\n        </div>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__message-search`}>\n        <MessageSearchProvider\n          channelUrl={channelUrl}\n          searchString={searchString}\n          onResultClick={onResultClick}\n          onResultLoaded={handleOnResultLoaded}\n          messageSearchQuery={messageSearchQuery}\n        >\n          <MessageSearch\n            renderPlaceHolderError={renderPlaceHolderError}\n            renderPlaceHolderLoading={renderPlaceHolderLoading}\n            renderPlaceHolderNoString={renderPlaceHolderNoString}\n            renderPlaceHolderEmptyList={renderPlaceHolderEmptyList}\n            renderSearchItem={renderSearchItem}\n          />\n        </MessageSearchProvider>\n      </div>\n    </div>\n  );\n}\n\nexport default MessageSearchPannel;\n"],"names":["COMPONENT_CLASS_NAME","MessageSearchPannel","props","channelUrl","onResultClick","onCloseClick","messageSearchQuery","renderPlaceHolderError","renderPlaceHolderLoading","renderPlaceHolderNoString","renderPlaceHolderEmptyList","renderSearchItem","_a","useState","searchString","setSearchString","_b","inputString","setInputString","_c","loading","setLoading","stringSet","useContext","LocalizationContext","timeout","useEffect","clearTimeout","setTimeout","handleOnChangeInputString","e","target","value","handleOnResultLoaded","handleOnClickResetStringButton","stopPropagation","React","createElement","className","concat","Label","type","LabelTypography","H_2","color","LabelColors","ONBACKGROUND_1","SEARCH_IN_CHANNEL","IconButton","width","height","onClick","Icon","IconTypes","CLOSE","fillColor","IconColors","ON_BACKGROUND_1","SEARCH","ON_BACKGROUND_3","placeholder","onChange","Loader","SPINNER","PRIMARY","REMOVE","MessageSearchProvider","onResultLoaded","MessageSearch"],"mappings":"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"}