{"version":3,"file":"MessageInput.js","sources":["../../../src/modules/Channel/components/MessageInput/index.tsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\n\nimport './message-input.scss';\nimport * as utils from '../../context/utils';\n\nimport type { Nullable } from '../../../../types';\nimport MessageInput from '../../../../ui/MessageInput';\nimport QuoteMessageInput from '../../../../ui/QuoteMessageInput';\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\nimport { useChannelContext } from '../../context/ChannelProvider';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport SuggestedMentionList from '../SuggestedMentionList';\nimport { MessageInputKeys } from '../../../../ui/MessageInput/const';\nimport VoiceMessageInputWrapper from './VoiceMessageInputWrapper';\nimport { useDirtyGetMentions } from '../../../Message/hooks/useDirtyGetMentions';\nimport { useMediaQueryContext } from '../../../../lib/MediaQueryContext';\nimport { useHandleUploadFiles } from './useHandleUploadFiles';\n\nexport type MessageInputWrapperProps = {\n  value?: string;\n  disabled?: boolean;\n  renderFileUploadIcon?: () => React.ReactElement;\n  renderVoiceMessageIcon?: () => React.ReactElement;\n  renderSendMessageIcon?: () => React.ReactElement;\n};\n\nconst MessageInputWrapper = (\n  props: MessageInputWrapperProps,\n  ref: React.MutableRefObject<any>,\n): Nullable<JSX.Element> => {\n  const {\n    value,\n    renderFileUploadIcon,\n    renderVoiceMessageIcon,\n    renderSendMessageIcon,\n  } = props;\n  const propDisabled = props.disabled;\n  const channelContext = useChannelContext();\n  const {\n    currentGroupChannel,\n    initialized,\n    quoteMessage,\n    sendMessage,\n    sendFileMessage,\n    sendVoiceMessage,\n    sendMultipleFilesMessage,\n    setQuoteMessage,\n    messageInputRef,\n    renderUserMentionItem,\n  } = channelContext;\n  const globalStore = useSendbirdStateContext();\n  const { isMobile } = useMediaQueryContext();\n  const channel = currentGroupChannel;\n\n  const {\n    isOnline,\n    isMentionEnabled,\n    userMention,\n    isVoiceMessageEnabled,\n    logger,\n  } = globalStore.config;\n  const isMultipleFilesMessageEnabled = (\n    channelContext.isMultipleFilesMessageEnabled\n    ?? globalStore.config.isMultipleFilesMessageEnabled\n  );\n  const maxUserMentionCount = userMention?.maxMentionCount || 10;\n  const maxUserSuggestionCount = userMention?.maxSuggestionCount || 15;\n\n  const { stringSet } = useContext(LocalizationContext);\n  const [mentionNickname, setMentionNickname] = useState('');\n  // todo: set type\n  const [mentionedUsers, setMentionedUsers] = useState([]);\n  const [mentionedUserIds, setMentionedUserIds] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [mentionSuggestedUsers, setMentionSuggestedUsers] = useState([]);\n  const [messageInputEvent, setMessageInputEvent] = useState(null);\n  const [showVoiceMessageInput, setShowVoiceMessageInput] = useState(false);\n  const disabled = propDisabled\n    || !initialized\n    || utils.isDisabledBecauseFrozen(channel)\n    || utils.isDisabledBecauseMuted(channel)\n    || !isOnline;\n  const isOperator = utils.isOperator(channel);\n  const isBroadcast = channel?.isBroadcast;\n\n  const displaySuggestedMentionList = isOnline\n    && isMentionEnabled\n    && mentionNickname.length > 0\n    && !utils.isDisabledBecauseFrozen(channel)\n    && !utils.isDisabledBecauseMuted(channel)\n    && !isBroadcast;\n\n  // Reset when channel changes\n  useEffect(() => {\n    setMentionNickname('');\n    setMentionedUsers([]);\n    setMentionedUserIds([]);\n    setSelectedUser(null);\n    setMentionSuggestedUsers([]);\n    setMessageInputEvent(null);\n    setShowVoiceMessageInput(false);\n  }, [channel?.url]);\n\n  const mentionNodes = useDirtyGetMentions({ ref: ref || messageInputRef }, { logger });\n  const ableMention = mentionNodes?.length < maxUserMentionCount;\n\n  useEffect(() => {\n    setMentionedUsers(mentionedUsers.filter(({ userId }) => {\n      const i = mentionedUserIds.indexOf(userId);\n      if (i < 0) {\n        return false;\n      } else {\n        mentionedUserIds.splice(i, 1);\n        return true;\n      }\n    }));\n  }, [mentionedUserIds]);\n\n  // MFM\n  const [handleUploadFiles] = useHandleUploadFiles({\n    sendFileMessage,\n    sendMultipleFilesMessage,\n    quoteMessage,\n  }, {\n    logger,\n  });\n\n  // broadcast channel + not operator\n  if (isBroadcast && !isOperator) {\n    return null;\n  }\n  // other conditions\n  return (\n    <div className={`sendbird-message-input-wrapper${showVoiceMessageInput ? '--voice-message' : ''}`}>\n      {\n        displaySuggestedMentionList && (\n          <SuggestedMentionList\n            targetNickname={mentionNickname}\n            inputEvent={messageInputEvent}\n            renderUserMentionItem={renderUserMentionItem}\n            onUserItemClick={(user) => {\n              if (user) {\n                setMentionedUsers([...mentionedUsers, user]);\n              }\n              setMentionNickname('');\n              setSelectedUser(user);\n              setMessageInputEvent(null);\n            }}\n            onFocusItemChange={() => {\n              setMessageInputEvent(null);\n            }}\n            onFetchUsers={(users) => {\n              setMentionSuggestedUsers(users);\n            }}\n            ableAddMention={ableMention}\n            maxMentionCount={maxUserMentionCount}\n            maxSuggestionCount={maxUserSuggestionCount}\n          />\n        )\n      }\n      {quoteMessage && (\n        <div className=\"sendbird-message-input-wrapper__quote-message-input\">\n          <QuoteMessageInput\n            replyingMessage={quoteMessage}\n            onClose={() => setQuoteMessage(null)}\n          />\n        </div>\n      )}\n      {\n        showVoiceMessageInput\n          ? (\n            <VoiceMessageInputWrapper\n              channel={channel}\n              onSubmitClick={(recordedFile, duration) => {\n                sendVoiceMessage(recordedFile, duration, quoteMessage);\n                setQuoteMessage(null);\n                setShowVoiceMessageInput(false);\n              }}\n              onCancelClick={() => {\n                setShowVoiceMessageInput(false);\n              }}\n            />\n          )\n          : (\n            <MessageInput\n              className=\"sendbird-message-input-wrapper__message-input\"\n              value={value}\n              channelUrl={channel?.url}\n              mentionSelectedUser={selectedUser}\n              isMentionEnabled={isMentionEnabled}\n              isVoiceMessageEnabled={isVoiceMessageEnabled}\n              isSelectingMultipleFilesEnabled={isMultipleFilesMessageEnabled}\n              onVoiceMessageIconClick={() => {\n                setShowVoiceMessageInput(true);\n              }}\n              setMentionedUsers={setMentionedUsers}\n              channel={channel}\n              placeholder={\n                (quoteMessage && stringSet.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER)\n                || (utils.isDisabledBecauseFrozen(channel) && stringSet.MESSAGE_INPUT__PLACE_HOLDER__DISABLED)\n                || (utils.isDisabledBecauseMuted(channel) && (\n                  isMobile ? stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT : stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED\n                ))\n              }\n              ref={ref || messageInputRef}\n              disabled={disabled}\n              renderFileUploadIcon={renderFileUploadIcon}\n              renderSendMessageIcon={renderSendMessageIcon}\n              renderVoiceMessageIcon={renderVoiceMessageIcon}\n              onStartTyping={() => {\n                channel?.startTyping();\n              }}\n              onSendMessage={({ message, mentionTemplate }) => {\n                sendMessage({\n                  message,\n                  quoteMessage,\n                  mentionedUsers,\n                  mentionTemplate,\n                });\n                setMentionNickname('');\n                setMentionedUsers([]);\n                setQuoteMessage(null);\n                channel?.endTyping?.();\n              }}\n              onFileUpload={(fileList: FileList) => {\n                handleUploadFiles(fileList);\n                setQuoteMessage(null);\n              }}\n              onUserMentioned={(user) => {\n                if (selectedUser?.userId === user?.userId) {\n                  setSelectedUser(null);\n                  setMentionNickname('');\n                }\n              }}\n              onMentionStringChange={(mentionText) => {\n                setMentionNickname(mentionText);\n              }}\n              onMentionedUserIdsUpdated={(userIds) => {\n                setMentionedUserIds(userIds);\n              }}\n              onKeyDown={(e) => {\n                if (displaySuggestedMentionList && mentionSuggestedUsers?.length > 0\n                  && ((e.key === MessageInputKeys.Enter && ableMention) || e.key === MessageInputKeys.ArrowUp || e.key === MessageInputKeys.ArrowDown)\n                ) {\n                  setMessageInputEvent(e);\n                  return true;\n                }\n                return false;\n              }}\n            />\n          )\n      }\n    </div>\n  );\n};\n\nexport default React.forwardRef(MessageInputWrapper);\n"],"names":["MessageInputWrapper","props","ref","value","renderFileUploadIcon","renderVoiceMessageIcon","renderSendMessageIcon","propDisabled","disabled","channelContext","useChannelContext","currentGroupChannel","initialized","quoteMessage","sendMessage","sendFileMessage","sendVoiceMessage","sendMultipleFilesMessage","setQuoteMessage","messageInputRef","renderUserMentionItem","globalStore","useSendbirdStateContext","isMobile","useMediaQueryContext","channel","_b","config","isOnline","isMentionEnabled","userMention","isVoiceMessageEnabled","logger","isMultipleFilesMessageEnabled","_a","maxUserMentionCount","maxMentionCount","maxUserSuggestionCount","maxSuggestionCount","stringSet","useContext","LocalizationContext","_c","useState","mentionNickname","setMentionNickname","_d","mentionedUsers","setMentionedUsers","_e","mentionedUserIds","setMentionedUserIds","_f","selectedUser","setSelectedUser","_g","mentionSuggestedUsers","setMentionSuggestedUsers","_h","messageInputEvent","setMessageInputEvent","_j","showVoiceMessageInput","setShowVoiceMessageInput","utils","isOperator","isBroadcast","displaySuggestedMentionList","length","useEffect","url","mentionNodes","useDirtyGetMentions","ableMention","filter","userId","i","indexOf","splice","handleUploadFiles","useHandleUploadFiles","React","createElement","className","concat","SuggestedMentionList","targetNickname","inputEvent","onUserItemClick","user","__spreadArray","onFocusItemChange","onFetchUsers","users","ableAddMention","QuoteMessageInput","replyingMessage","onClose","VoiceMessageInputWrapper","onSubmitClick","recordedFile","duration","onCancelClick","MessageInput","channelUrl","mentionSelectedUser","isSelectingMultipleFilesEnabled","onVoiceMessageIconClick","placeholder","MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER","MESSAGE_INPUT__PLACE_HOLDER__DISABLED","MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT","MESSAGE_INPUT__PLACE_HOLDER__MUTED","onStartTyping","startTyping","onSendMessage","message","mentionTemplate","endTyping","onFileUpload","fileList","onUserMentioned","onMentionStringChange","mentionText","onMentionedUserIdsUpdated","userIds","onKeyDown","e","key","MessageInputKeys","Enter","ArrowUp","ArrowDown","forwardRef"],"mappings":"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"}