{"version":3,"file":"ChannelPreviewAction.js","sources":["../../../src/modules/ChannelList/components/LeaveChannel/index.tsx","../../../src/modules/ChannelList/components/ChannelPreviewAction.tsx"],"sourcesContent":["import React from 'react';\n\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { noop } from '../../../../utils/utils';\n\nimport Modal from '../../../../ui/Modal';\nimport { useChannelListContext } from '../../context/ChannelListProvider';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\nimport { GroupChannel } from '@sendbird/chat/groupChannel';\n\nexport type LeaveChannelProps = {\n  channel?: GroupChannel;\n  onSubmit: () => void;\n  onCancel: () => void;\n};\n\nconst LeaveChannel: React.FC<LeaveChannelProps> = (props: LeaveChannelProps) => {\n  const {\n    channel = null,\n    onSubmit = noop,\n    onCancel = noop,\n  } = props;\n\n  const channelFromContext = useChannelListContext()?.currentChannel;\n  const leavingChannel = channel || channelFromContext;\n  const state = useSendbirdStateContext();\n  const { stringSet } = useLocalization();\n\n  const logger = state?.config?.logger;\n  const isOnline = state?.config?.isOnline;\n  if (leavingChannel) {\n    return (\n      <Modal\n        disabled={!isOnline}\n        onCancel={onCancel}\n        onSubmit={() => {\n          logger.info('ChannelSettings: Leaving channel', leavingChannel);\n          leavingChannel?.leave()\n            .then(() => {\n              logger.info('ChannelSettings: Leaving channel successful!', leavingChannel);\n              onSubmit();\n            });\n        }}\n        submitText={stringSet.MODAL__LEAVE_CHANNEL__FOOTER}\n        titleText={stringSet.MODAL__LEAVE_CHANNEL__TITLE}\n      />\n    );\n  }\n};\n\nexport default LeaveChannel;\n","import React, { useState, useRef, useContext } from 'react';\n\nimport { LocalizationContext } from '../../../lib/LocalizationContext';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../ui/ContextMenu';\nimport IconButton from '../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../ui/Icon';\nimport LeaveChannelModal from './LeaveChannel';\nimport { GroupChannel } from '@sendbird/chat/groupChannel';\n\ntype ChannelPreviewActionProps = {\n  channel?: GroupChannel;\n  disabled: boolean;\n  onLeaveChannel(): void;\n};\n\nexport default function ChannelPreviewAction({ channel, disabled = false, onLeaveChannel }: ChannelPreviewActionProps) {\n  const parentRef = useRef(null);\n  const parentContainerRef = useRef(null);\n  const [showModal, setShowModal] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <div\n      ref={parentContainerRef}\n      tabIndex={0}\n      role=\"button\"\n      style={{ display: 'inline-block' }}\n      onKeyDown={(e) => e.stopPropagation()}\n      onClick={(e) => e.stopPropagation()}\n    >\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <IconButton ref={parentRef} onClick={toggleDropdown} height=\"32px\" width=\"32px\">\n            <Icon type={IconTypes.MORE} fillColor={IconColors.PRIMARY} width=\"24px\" height=\"24px\" />\n          </IconButton>\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems parentRef={parentRef} parentContainRef={parentContainerRef} closeDropdown={closeDropdown}>\n            <MenuItem\n              onClick={() => {\n                if (disabled) {\n                  return;\n                }\n                setShowModal(true);\n                closeDropdown();\n              }}\n              dataSbId=\"channel_list_item_context_menu_leave_channel\"\n            >\n              {stringSet.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE}\n            </MenuItem>\n          </MenuItems>\n        )}\n      />\n      {showModal && (\n        <LeaveChannelModal\n          channel={channel}\n          onSubmit={() => {\n            setShowModal(false);\n            onLeaveChannel();\n          }}\n          onCancel={() => setShowModal(false)}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":["LeaveChannel","props","_d","channel","_e","onSubmit","noop","_f","onCancel","channelFromContext","_a","useChannelListContext","currentChannel","leavingChannel","state","useSendbirdStateContext","stringSet","useLocalization","logger","_b","config","isOnline","_c","React","createElement","Modal","disabled","info","leave","then","submitText","MODAL__LEAVE_CHANNEL__FOOTER","titleText","MODAL__LEAVE_CHANNEL__TITLE","ChannelPreviewAction","onLeaveChannel","parentRef","useRef","parentContainerRef","useState","showModal","setShowModal","useContext","LocalizationContext","ref","tabIndex","role","style","display","onKeyDown","e","stopPropagation","onClick","ContextMenu","menuTrigger","toggleDropdown","IconButton","height","width","Icon","type","IconTypes","MORE","fillColor","IconColors","PRIMARY","menuItems","closeDropdown","MenuItems","parentContainRef","MenuItem","dataSbId","CHANNEL_SETTING__LEAVE_CHANNEL__TITLE","LeaveChannelModal"],"mappings":"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"}