{"version":3,"file":"LeaveChannel.js","sources":["../../../src/modules/ChannelSettings/components/LeaveChannel/index.tsx"],"sourcesContent":["import './leave-channel.scss';\n\nimport React from 'react';\nimport type { GroupChannel } from '@sendbird/chat/groupChannel';\n\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { useChannelSettingsContext } from '../../context/ChannelSettingsProvider';\nimport { noop } from '../../../../utils/utils';\n\nimport Modal from '../../../../ui/Modal';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\nimport { useMediaQueryContext } from '../../../../lib/MediaQueryContext';\nimport TextButton from '../../../../ui/TextButton';\nimport Label, {\n  LabelTypography,\n  LabelColors,\n} from '../../../../ui/Label';\n\nexport type LeaveChannelProps = {\n  onSubmit: () => void;\n  onCancel: () => void;\n};\n\nconst LeaveChannel: React.FC<LeaveChannelProps> = (props: LeaveChannelProps) => {\n  const {\n    onSubmit = noop,\n    onCancel = noop,\n  } = props;\n\n  const { channel, onLeaveChannel } = useChannelSettingsContext();\n  const { stringSet } = useLocalization();\n  const state = useSendbirdStateContext();\n  const logger = state?.config?.logger;\n  const isOnline = state?.config?.isOnline;\n  const { isMobile } = useMediaQueryContext();\n  const getChannelName = (channel: GroupChannel) => {\n    if (channel?.name && channel?.name !== 'Group Channel') {\n      return channel.name;\n    }\n    if (channel?.name === 'Group Channel' || !channel?.name) {\n      return (channel?.members || []).map((member) => member.nickname || stringSet.NO_NAME).join(', ');\n    }\n\n    return stringSet.NO_TITLE;\n  };\n  if (isMobile) {\n    return (\n      <Modal\n        className=\"sendbird-channel-settings__leave--mobile\"\n        titleText={getChannelName(channel)}\n        hideFooter\n        isCloseOnClickOutside\n        onCancel={onCancel}\n      >\n        <TextButton\n          onClick={() => {\n            logger.info('ChannelSettings: Leaving channel', channel);\n            channel?.leave()\n              .then(() => {\n                logger.info('ChannelSettings: Leaving channel successful!', channel);\n                onLeaveChannel();\n              });\n          }}\n          className=\"sendbird-channel-settings__leave-label--mobile\"\n        >\n          <Label\n            type={LabelTypography.SUBTITLE_1}\n            color={LabelColors.ONBACKGROUND_1}\n          >\n            {stringSet.CHANNEL_PREVIEW_MOBILE_LEAVE}\n          </Label>\n        </TextButton>\n      </Modal>\n    );\n  }\n  return (\n    <Modal\n      isFullScreenOnMobile\n      disabled={!isOnline}\n      onCancel={onCancel}\n      onSubmit={() => {\n        logger.info('ChannelSettings: Leaving channel', channel);\n        channel?.leave()\n          .then(() => {\n            logger.info('ChannelSettings: Leaving channel successful!', channel);\n            // is for backward compactability\n            if (onLeaveChannel) {\n              onLeaveChannel();\n            } else {\n              onSubmit();\n            }\n          });\n      }}\n      submitText={stringSet.MODAL__LEAVE_CHANNEL__FOOTER}\n      titleText={stringSet.MODAL__LEAVE_CHANNEL__TITLE}\n    />\n  );\n};\n\nexport default LeaveChannel;\n"],"names":["LeaveChannel","props","_c","onSubmit","noop","_d","onCancel","_e","useChannelSettingsContext","channel","onLeaveChannel","stringSet","useLocalization","state","useSendbirdStateContext","logger","_a","config","isOnline","_b","isMobile","useMediaQueryContext","getChannelName","name","members","map","member","nickname","NO_NAME","join","NO_TITLE","React","createElement","Modal","className","titleText","hideFooter","isCloseOnClickOutside","TextButton","onClick","info","leave","then","Label","type","LabelTypography","SUBTITLE_1","color","LabelColors","ONBACKGROUND_1","CHANNEL_PREVIEW_MOBILE_LEAVE","isFullScreenOnMobile","disabled","submitText","MODAL__LEAVE_CHANNEL__FOOTER","MODAL__LEAVE_CHANNEL__TITLE"],"mappings":"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"}