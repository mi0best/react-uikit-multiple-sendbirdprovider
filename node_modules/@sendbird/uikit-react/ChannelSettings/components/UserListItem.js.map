{"version":3,"file":"UserListItem.js","sources":["../../../src/modules/ChannelSettings/components/UserListItem/index.tsx"],"sourcesContent":["import React, { ReactElement, useRef, useContext } from 'react';\nimport { User } from '@sendbird/chat';\n\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\nimport { UserProfileContext } from '../../../../lib/UserProfileContext';\nimport Avatar from '../../../../ui/Avatar/index';\nimport MutedAvatarOverlay from '../../../../ui/Avatar/MutedAvatarOverlay';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport UserProfile from '../../../../ui/UserProfile';\nimport ContextMenu, { MenuItems } from '../../../../ui/ContextMenu';\n\nimport './user-list-item.scss';\n\ninterface ActionProps {\n  actionRef: React.RefObject<HTMLInputElement>;\n  parentRef: React.RefObject<HTMLInputElement>;\n}\n\ntype CustomUser = User & {\n  isMuted: boolean;\n  role: string;\n};\n\ninterface Props {\n  user: CustomUser;\n  currentUser?: string;\n  className?: string;\n  action?(props: ActionProps): ReactElement;\n}\n\nconst UserListItem = ({\n  user,\n  className,\n  currentUser,\n  action,\n}: Props): ReactElement => {\n  const actionRef = useRef(null);\n  const parentRef = useRef(null);\n  const avatarRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const { disableUserProfile, renderUserProfile } = useContext(UserProfileContext);\n  const injectingClassNames = Array.isArray(className) ? className : [className];\n  return (\n    <div\n      ref={parentRef}\n      className={[\n        'sendbird-user-list-item--small', ...injectingClassNames,\n      ].join(' ')}\n    >\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <>\n            <Avatar\n              onClick={() => {\n                if (!disableUserProfile) {\n                  toggleDropdown();\n                }\n              }}\n              ref={avatarRef}\n              className=\"sendbird-user-list-item--small__avatar\"\n              src={user.profileUrl}\n              width={24}\n              height={24}\n            />\n            {\n              user.isMuted && (\n                <MutedAvatarOverlay />\n              )\n            }\n          </>\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            openLeft\n            parentRef={avatarRef}\n            // for catching location(x, y) of MenuItems\n            parentContainRef={avatarRef}\n            // for toggling more options(menus & reactions)\n            closeDropdown={closeDropdown}\n            style={{ paddingTop: '0px', paddingBottom: '0px' }}\n          >\n            {\n              renderUserProfile\n                ? renderUserProfile({\n                  user,\n                  currentUserId: currentUser,\n                  close: closeDropdown,\n                })\n                : (\n                  <UserProfile\n                    user={user}\n                    currentUserId={currentUser}\n                    onSuccess={closeDropdown}\n                  />\n                )\n            }\n          </MenuItems>\n        )}\n      />\n      {/* {\n        user.isMuted && (\n          <MutedAvatarOverlay />\n        )\n      } */}\n      <Label\n        className=\"sendbird-user-list-item--small__title\"\n        type={LabelTypography.SUBTITLE_1}\n        color={LabelColors.ONBACKGROUND_1}\n      >\n        {user.nickname || stringSet.NO_NAME}\n        {\n          (currentUser === user.userId) && (\n            stringSet.CHANNEL_SETTING__MEMBERS__YOU\n          )\n        }\n      </Label>\n      { // if there is now nickname, display userId\n        !user.nickname && (\n          <Label\n            className=\"sendbird-user-list-item--small__subtitle\"\n            type={LabelTypography.CAPTION_3}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {user.userId}\n          </Label>\n        )\n      }\n      {\n        user.role === 'operator' && (\n          <Label\n            className=\"sendbird-user-list-item--small__operator\"\n            type={LabelTypography.SUBTITLE_2}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {stringSet.CHANNEL_SETTING__MEMBERS__OPERATOR}\n          </Label>\n        )\n      }\n      {\n        action && (\n          <div ref={actionRef} className=\"sendbird-user-list-item--small__action\">\n            {action({ actionRef, parentRef })}\n          </div>\n        )\n      }\n    </div>\n  );\n};\n\nexport default UserListItem;\n"],"names":["UserListItem","_a","user","className","currentUser","action","actionRef","useRef","parentRef","avatarRef","stringSet","useContext","LocalizationContext","_b","UserProfileContext","disableUserProfile","renderUserProfile","injectingClassNames","Array","isArray","React","createElement","ref","__spreadArray","join","ContextMenu","menuTrigger","toggleDropdown","Fragment","Avatar","onClick","src","profileUrl","width","height","isMuted","MutedAvatarOverlay","menuItems","closeDropdown","MenuItems","openLeft","parentContainRef","style","paddingTop","paddingBottom","currentUserId","close","UserProfile","onSuccess","Label","type","LabelTypography","SUBTITLE_1","color","LabelColors","ONBACKGROUND_1","nickname","NO_NAME","userId","CHANNEL_SETTING__MEMBERS__YOU","CAPTION_3","ONBACKGROUND_2","role","SUBTITLE_2","CHANNEL_SETTING__MEMBERS__OPERATOR"],"mappings":"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"}