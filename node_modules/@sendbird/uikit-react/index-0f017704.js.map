{"version":3,"file":"index-0f017704.js","sources":["../src/ui/FileViewer/types.ts","../src/ui/FileViewer/hooks/useKeyDown.ts","../src/ui/FileViewer/utils.ts","../src/ui/FileViewer/DeleteButton.tsx","../src/ui/FileViewer/Slider.tsx","../src/ui/FileViewer/index.tsx"],"sourcesContent":["// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types\n\n// TODO: refactor this to -> as const pattern\nexport type SupportedImageMimesType = 'image/jpeg' | 'image/jpg' | 'image/png' | 'image/gif' | 'image/svg+xml' | 'image/webp';\nexport type SupportedVideoMimesType = 'video/mpeg' | 'video/ogg' | 'video/webm' | 'video/mp4';\nexport type SupportedMimesType = SupportedImageMimesType | SupportedVideoMimesType;\n\nconst SUPPORTED_MIMES = {\n  IMAGE: [\n    'image/jpeg',\n    'image/jpg',\n    'image/png',\n    'image/gif',\n    'image/svg+xml',\n    'image/webp',\n  ],\n  VIDEO: [\n    'video/mpeg',\n    'video/ogg',\n    'video/webm',\n    'video/mp4',\n  ],\n};\n\nexport const isImage = (type: SupportedImageMimesType): boolean => SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;\nexport const isVideo = (type: SupportedVideoMimesType): boolean => SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;\nexport const isGif = (type: SupportedMimesType): boolean => type === 'image/gif';\nexport const unSupported = (type: SupportedMimesType): boolean => (\n  !(\n    isImage(type as SupportedImageMimesType)\n    || isVideo(type as SupportedVideoMimesType)\n  )\n);\n\nexport default { ...SUPPORTED_MIMES };\n\nexport const ViewerTypes = {\n  SINGLE: 'SINGLE',\n  MULTI: 'MULTI',\n} as const;\n\nexport type ViewerType = keyof typeof ViewerTypes;\n\nexport interface SenderInfo {\n  profileUrl: string;\n  nickname: string;\n}\nexport interface FileInfo {\n  name: string;\n  type: string;\n  url: string;\n}\n\nexport interface BaseViewer {\n  onClose: (e: React.MouseEvent) => void;\n}\n\nexport interface SingleFileViewer extends SenderInfo, FileInfo, BaseViewer {\n  viewerType?: typeof ViewerTypes.SINGLE;\n  isByMe?: boolean;\n  disableDelete?: boolean;\n  onDelete: (e: React.MouseEvent) => void;\n}\n\nexport interface MultiFilesViewer extends SenderInfo, BaseViewer {\n  viewerType: typeof ViewerTypes.MULTI;\n  fileInfoList: FileInfo[];\n  currentIndex: number;\n  onClickLeft: () => void;\n  onClickRight: () => void;\n}\n\nexport type FileViewerComponentProps = SingleFileViewer | MultiFilesViewer;\n","import { useCallback, useLayoutEffect } from 'react';\nimport { noop } from '../../../utils/utils';\nimport { FileViewerComponentProps, ViewerTypes } from '../types';\n\nexport function useKeyDown({ props, ref }: {\n  props: FileViewerComponentProps,\n  ref: React.RefObject<HTMLDivElement>;\n}): {\n  onKeyDown: React.KeyboardEventHandler<HTMLDivElement>;\n} {\n  const { onClose } = props;\n  let onClickLeft = noop;\n  let onClickRight = noop;\n  if (props.viewerType === ViewerTypes.MULTI) {\n    onClickLeft = props.onClickLeft;\n    onClickRight = props.onClickRight;\n  }\n\n  useLayoutEffect(() => {\n    ref.current?.focus();\n  }, [ref.current]);\n\n  // this usecallback is not super necessary\n  // discuss with others and remove it if it's not needed\n  const onKeyDown: React.KeyboardEventHandler<HTMLDivElement> = useCallback((event) => {\n    switch (event.key) {\n      case 'Escape':\n        // @ts-ignore\n        onClose(event);\n        break;\n      case 'ArrowLeft':\n        onClickLeft();\n        break;\n      case 'ArrowRight':\n        onClickRight();\n        break;\n      default:\n        break;\n    }\n    event.stopPropagation();\n  }, [onClose, onClickLeft, onClickRight]);\n\n  return {\n    onKeyDown,\n  };\n}\n","import { FileInfo, FileViewerComponentProps, MultiFilesViewer, SingleFileViewer, ViewerTypes } from './types';\n\nexport function mapFileViewerComponentProps({ props }: {\n  props: FileViewerComponentProps;\n}): FileInfo {\n  if (props.viewerType === ViewerTypes.MULTI) {\n    const { fileInfoList, currentIndex } = props as MultiFilesViewer;\n    return fileInfoList[currentIndex];\n  }\n  const fileInfo: FileInfo = props as SingleFileViewer;\n  return {\n    name: fileInfo.name,\n    type: fileInfo.type,\n    url: fileInfo.url,\n  };\n}\n","import React from 'react';\nimport { FileViewerComponentProps, ViewerTypes } from './types';\nimport Icon, { IconColors, IconTypes } from '../Icon';\n\nexport function DeleteButton(props: FileViewerComponentProps & { className?: string }): React.ReactElement {\n  if (props.viewerType !== ViewerTypes.MULTI) {\n    const { onDelete, isByMe, disableDelete, className } = props;\n    return (isByMe)\n      ? (\n        <div className={`sendbird-fileviewer__header__right__actions__delete ${className}`}>\n          <Icon\n            className={disableDelete ? 'disabled' : ''}\n            type={IconTypes.DELETE}\n            fillColor={disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1}\n            height=\"24px\"\n            width=\"24px\"\n            onClick={(e) => { if (!disableDelete) { onDelete?.(e); } }}\n          />\n        </div>\n      )\n      : <></>;\n  }\n  return <></>;\n}\n","import React from 'react';\nimport { FileViewerComponentProps, ViewerTypes } from './types';\nimport Icon, { IconColors, IconTypes } from '../Icon';\nimport { SLIDER_BUTTON_ICON_SIDE_LENGTH } from '../../utils/consts';\n\n// this is a slider component that is used to navigate between images\nexport function Slider(props: FileViewerComponentProps): React.ReactElement {\n  if (props.viewerType === ViewerTypes.MULTI) {\n    const { onClickLeft, onClickRight } = props;\n    return (\n      <div className=\"sendbird-file-viewer-slider\">\n        <div className=\"sendbird-file-viewer-arrow--left\">\n          <Icon\n            type={IconTypes.SLIDE_LEFT}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            height={SLIDER_BUTTON_ICON_SIDE_LENGTH}\n            width={SLIDER_BUTTON_ICON_SIDE_LENGTH}\n            onClick={(e) => {\n              onClickLeft?.();\n              e.stopPropagation();\n            }}\n          />\n        </div>\n        <div className=\"sendbird-file-viewer-arrow--right\">\n          <Icon\n            type={IconTypes.SLIDE_LEFT}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            height={SLIDER_BUTTON_ICON_SIDE_LENGTH}\n            width={SLIDER_BUTTON_ICON_SIDE_LENGTH}\n            onClick={(e) => {\n              e.stopPropagation();\n              onClickRight?.();\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n  // return empty fragment if viewerType is not ViewerTypes.MULTI\n  return <></>;\n}\n","import './index.scss';\n\nimport React, { MouseEvent, ReactElement, useContext, useRef } from 'react';\nimport { FileMessage, MultipleFilesMessage } from '@sendbird/chat/message';\nimport { createPortal } from 'react-dom';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { MODAL_ROOT } from '../../hooks/useModal';\nimport { isFileMessage, isImage, isMultipleFilesMessage, isSupportedFileView, isVideo } from '../../utils';\nimport { noop } from '../../utils/utils';\nimport Avatar from '../Avatar/index';\nimport Label, { LabelColors, LabelTypography } from '../Label';\nimport Icon, { IconColors, IconTypes } from '../Icon';\nimport { FileInfo, FileViewerComponentProps, ViewerTypes } from './types';\nimport { useKeyDown } from './hooks/useKeyDown';\nimport { mapFileViewerComponentProps } from './utils';\nimport { DeleteButton } from './DeleteButton';\nimport { Slider } from './Slider';\nimport { StatefulFileInfo } from '../../utils/createStatefulFileInfoList';\n\nexport const FileViewerComponent = (props: FileViewerComponentProps): ReactElement => {\n  const ref = useRef<HTMLDivElement>(null);\n  const { profileUrl, nickname, onClose } = props;\n  const { onKeyDown } = useKeyDown({ props, ref });\n  const { name, type, url } = mapFileViewerComponentProps({ props });\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <div\n      className=\"sendbird-fileviewer\"\n      onKeyDown={onKeyDown}\n      // to focus\n      tabIndex={1}\n      ref={ref}\n    >\n      <div className=\"sendbird-fileviewer__header\">\n        <div className=\"sendbird-fileviewer__header__left\">\n          <div className=\"sendbird-fileviewer__header__left__avatar\">\n            <Avatar height=\"32px\" width=\"32px\" src={profileUrl} />\n          </div>\n          <Label\n            className=\"sendbird-fileviewer__header__left__filename\"\n            type={LabelTypography.H_2}\n            color={LabelColors.ONBACKGROUND_1}\n          >\n            {name}\n          </Label>\n          <Label\n            className=\"sendbird-fileviewer__header__left__sender-name\"\n            type={LabelTypography.BODY_1}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {nickname}\n          </Label>\n        </div>\n        <div\n          className=\"sendbird-fileviewer__header__right\"\n        >\n          {\n            isSupportedFileView(type) && (\n              <div className=\"sendbird-fileviewer__header__right__actions\" >\n                <a\n                  className=\"sendbird-fileviewer__header__right__actions__download\"\n                  rel=\"noopener noreferrer\"\n                  href={url}\n                  target=\"_blank\"\n                >\n                  <Icon\n                    type={IconTypes.DOWNLOAD}\n                    fillColor={IconColors.ON_BACKGROUND_1}\n                    height=\"24px\"\n                    width=\"24px\"\n                  />\n                </a>\n                <DeleteButton\n                  className='sendbird-fileviewer__header__right__actions__delete'\n                  {...props}\n                />\n              </div>\n            )\n          }\n          <div className=\"sendbird-fileviewer__header__right__actions__close\">\n            <Icon\n              type={IconTypes.CLOSE}\n              fillColor={IconColors.ON_BACKGROUND_1}\n              height=\"24px\"\n              width=\"24px\"\n              onClick={(e) => onClose?.(e)}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"sendbird-fileviewer__content\">\n        {isVideo(type) && (\n          <video\n            controls\n            className=\"sendbird-fileviewer__content__video\"\n          >\n            <source src={url} type={type} />\n          </video>\n        )}\n        {\n          isImage(type) && (\n            <img\n              src={url}\n              alt={name}\n              className={\n                props.viewerType === ViewerTypes.MULTI\n                  ? 'sendbird-fileviewer__content__img__multi'\n                  : 'sendbird-fileviewer__content__img'\n              }\n            />\n          )\n        }\n        {\n          !isSupportedFileView(type) && (\n            <div className=\"sendbird-fileviewer__content__unsupported\">\n              <Label type={LabelTypography.H_1} color={LabelColors.ONBACKGROUND_1}>\n                {stringSet?.UI__FILE_VIEWER__UNSUPPORT || 'Unsupported message'}\n              </Label>\n            </div>\n          )\n        }\n        <Slider {...props} />\n      </div>\n    </div>\n  );\n};\n\nexport interface FileViewerProps {\n  message?: FileMessage | MultipleFilesMessage;\n  statefulFileInfoList?: StatefulFileInfo[]\n  isByMe?: boolean;\n  currentIndex?: number;\n  onClose: (e: MouseEvent) => void;\n  onDelete?: (e: MouseEvent) => void;\n  onClickLeft?: () => void;\n  onClickRight?: () => void;\n}\n\nexport default function FileViewer({\n  message,\n  statefulFileInfoList = [],\n  onClose,\n  isByMe = false,\n  onDelete,\n  currentIndex,\n  onClickLeft,\n  onClickRight,\n}: FileViewerProps): ReactElement {\n  if (isMultipleFilesMessage(message)) {\n    const castedMessage = message as MultipleFilesMessage;\n    return (\n      <FileViewerComponent\n        profileUrl={castedMessage.sender.profileUrl}\n        nickname={castedMessage.sender.nickname}\n        viewerType={ViewerTypes.MULTI}\n        fileInfoList={\n          statefulFileInfoList.filter((fileInfo: StatefulFileInfo) => {\n            return fileInfo.url; // Caution: This assumes that defined url means file upload has completed.\n          }).map((fileInfo: StatefulFileInfo): FileInfo => {\n            return {\n              name: fileInfo.fileName || '',\n              type: fileInfo.mimeType || '',\n              url: fileInfo.url,\n            };\n          })\n        }\n        currentIndex={currentIndex || 0}\n        onClickLeft={onClickLeft || noop}\n        onClickRight={onClickRight || noop}\n        onClose={onClose}\n      />\n    );\n  } else if (isFileMessage(message)) {\n    const castedMessage = message as FileMessage;\n    return createPortal(\n      (\n        <FileViewerComponent\n          profileUrl={castedMessage.sender?.profileUrl}\n          nickname={castedMessage.sender?.nickname}\n          name={castedMessage.name}\n          type={castedMessage.type}\n          url={castedMessage?.url}\n          isByMe={isByMe}\n          disableDelete={(castedMessage.threadInfo?.replyCount || 0) > 0}\n          onClose={onClose}\n          onDelete={onDelete || noop}\n        />\n      ),\n      (document.getElementById(MODAL_ROOT) as HTMLElement),\n    );\n  }\n  return <></>;\n}\n"],"names":["SUPPORTED_MIMES","IMAGE","VIDEO","isImage","type","indexOf","isVideo","__assign","ViewerTypes","SINGLE","MULTI","useKeyDown","_a","props","ref","onClose","onClickLeft","noop","onClickRight","viewerType","useLayoutEffect","current","focus","onKeyDown","useCallback","event","key","stopPropagation","mapFileViewerComponentProps","_b","fileInfoList","currentIndex","fileInfo","name","url","DeleteButton","onDelete_1","isByMe","disableDelete_1","disableDelete","className","React","createElement","concat","Icon","IconTypes","DELETE","fillColor","IconColors","GRAY","ON_BACKGROUND_1","height","width","onClick","e","Fragment","Slider","onClickLeft_1","onClickRight_1","SLIDE_LEFT","SLIDER_BUTTON_ICON_SIDE_LENGTH","FileViewerComponent","useRef","profileUrl","nickname","stringSet","useContext","LocalizationContext","tabIndex","Avatar","src","Label","LabelTypography","H_2","color","LabelColors","ONBACKGROUND_1","BODY_1","ONBACKGROUND_2","isSupportedFileView","rel","href","target","DOWNLOAD","_extends","CLOSE","controls","alt","H_1","UI__FILE_VIEWER__UNSUPPORT","FileViewer","message","_e","statefulFileInfoList","_f","onDelete","isMultipleFilesMessage","castedMessage","sender","filter","map","fileName","mimeType","isFileMessage","createPortal","_c","_d","threadInfo","replyCount","document","getElementById","MODAL_ROOT"],"mappings":"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"}