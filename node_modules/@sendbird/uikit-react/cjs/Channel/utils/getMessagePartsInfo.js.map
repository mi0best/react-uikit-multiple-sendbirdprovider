{"version":3,"file":"getMessagePartsInfo.js","sources":["../../../../src/modules/Channel/components/MessageList/getMessagePartsInfo.ts"],"sourcesContent":["import { GroupChannel } from '@sendbird/chat/groupChannel';\nimport isSameDay from 'date-fns/isSameDay';\n\nimport { compareMessagesForGrouping } from '../../context/compareMessagesForGrouping';\nimport { ReplyType } from '../../../../types';\nimport { CoreMessageType } from '../../../../utils';\n\nexport interface GetMessagePartsInfoProps {\n  allMessages: Array<CoreMessageType>;\n  isMessageGroupingEnabled: boolean;\n  currentIndex: number;\n  currentMessage: CoreMessageType;\n  currentChannel: GroupChannel;\n  replyType: string;\n}\n\ninterface OutPuts {\n  chainTop: boolean,\n  chainBottom: boolean,\n  hasSeparator: boolean,\n}\n\n/**\n * exported, should be backward compatible\n */\nexport const getMessagePartsInfo = ({\n  allMessages = [],\n  isMessageGroupingEnabled = true,\n  currentIndex = 0,\n  currentMessage = null,\n  currentChannel = null,\n  replyType = '',\n}: GetMessagePartsInfoProps): OutPuts => {\n  const previousMessage = allMessages[currentIndex - 1];\n  const nextMessage = allMessages[currentIndex + 1];\n  const [chainTop, chainBottom] = isMessageGroupingEnabled\n    ? compareMessagesForGrouping(previousMessage, currentMessage, nextMessage, currentChannel, (replyType as ReplyType))\n    : [false, false];\n  const previousMessageCreatedAt = previousMessage?.createdAt;\n  const currentCreatedAt = currentMessage.createdAt;\n  // https://stackoverflow.com/a/41855608\n  const hasSeparator = !(previousMessageCreatedAt && (\n    isSameDay(currentCreatedAt, previousMessageCreatedAt)\n  ));\n  return {\n    chainTop,\n    chainBottom,\n    hasSeparator,\n  };\n};\n"],"names":["getMessagePartsInfo","_a","_b","allMessages","_c","isMessageGroupingEnabled","_d","currentIndex","_e","currentMessage","_f","currentChannel","_g","replyType","previousMessage","nextMessage","_h","compareMessagesForGrouping","chainTop","chainBottom","previousMessageCreatedAt","createdAt","currentCreatedAt","hasSeparator","isSameDay"],"mappings":";;;;;;;;;;;;;;;AAsBA;;AAEG;IACUA,mBAAmB,GAAG,UAACC,EAOT,EAAA;AANzB,EAAA,IAAAC,EAAA,GAAAD,EAAA,CAAAE,WAAgB;IAAhBA,WAAW,GAAAD,EAAA,KAAA,KAAA,CAAA,GAAG,EAAE,GAAAA,EAAA;IAChBE,EAA+B,GAAAH,EAAA,CAAAI,wBAAA;IAA/BA,wBAAwB,GAAAD,EAAA,KAAA,KAAA,CAAA,GAAG,IAAI,GAAAA,EAAA;IAC/BE,oBAAgB;IAAhBC,YAAY,mBAAG,CAAC,GAAAD,EAAA;IAChBE,EAAA,GAAAP,EAAA,CAAAQ,cAAqB;IAArBA,cAAc,GAAAD,EAAA,KAAA,KAAA,CAAA,GAAG,IAAI,GAAAA,EAAA;IACrBE,sBAAqB;IAArBC,cAAc,GAAGD,EAAA,KAAA,KAAA,CAAA,GAAA,IAAI,KAAA;IACrBE,EAAA,GAAAX,EAAA,CAAAY,SAAc;IAAdA,SAAS,GAAAD,EAAA,KAAA,KAAA,CAAA,GAAG,EAAE,GAAAA,EAAA,CAAA;AAEd,EAAA,IAAME,eAAe,GAAGX,WAAW,CAACI,YAAY,GAAG,CAAC,CAAC,CAAA;AACrD,EAAA,IAAMQ,WAAW,GAAGZ,WAAW,CAACI,YAAY,GAAG,CAAC,CAAC,CAAA;EAC3C,IAAAS,KAA0BX,wBAAwB,GACpDY,mEAA0B,CAACH,eAAe,EAAEL,cAAc,EAAEM,WAAW,EAAEJ,cAAc,EAAGE,SAAuB,CAAC,GAClH,CAAC,KAAK,EAAE,KAAK,CAAC;AAFXK,IAAAA,QAAQ,GAAAF,EAAA,CAAA,CAAA,CAAA;AAAEG,IAAAA,WAAW,GAAAH,EAAA,CAAA,CAAA,CAEV,CAAA;AAClB,EAAA,IAAMI,wBAAwB,GAAGN,eAAe,KAAA,IAAA,IAAfA,eAAe,KAAf,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,eAAe,CAAEO,SAAS,CAAA;AAC3D,EAAA,IAAMC,gBAAgB,GAAGb,cAAc,CAACY,SAAS,CAAA;AACjD;EACA,IAAME,YAAY,GAAG,EAAEH,wBAAwB,IAC7CI,eAAS,CAACF,gBAAgB,EAAEF,wBAAwB,CACrD,CAAC,CAAA;EACF,OAAO;AACLF,IAAAA,QAAQ,EAAAA,QAAA;AACRC,IAAAA,WAAW,EAAAA,WAAA;AACXI,IAAAA,YAAY,EAAAA,YAAAA;GACb,CAAA;AACH;;;;"}