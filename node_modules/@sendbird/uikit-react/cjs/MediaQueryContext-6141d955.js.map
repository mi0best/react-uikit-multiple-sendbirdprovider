{"version":3,"file":"MediaQueryContext-6141d955.js","sources":["../../src/lib/MediaQueryContext.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport type { Logger } from './SendbirdState';\n\nconst DEFAULT_MOBILE = false;\n// const DEFAULT_MOBILE = '768px';\nconst MOBILE_CLASSNAME = 'sendbird--mobile-mode';\n\nexport type useMediaQueryContextType = () => ({\n  breakpoint: string | boolean;\n  isMobile: boolean;\n});\n\nconst MediaQueryContext = React.createContext<ReturnType<useMediaQueryContextType>>({\n  breakpoint: DEFAULT_MOBILE,\n  isMobile: false,\n});\n\nexport interface MediaQueryProviderProps {\n  children: React.ReactElement;\n  breakpoint?: string | boolean;\n  logger?: Logger;\n}\n\nconst addClassNameToBody = () => {\n  try {\n    const body = document.querySelector('body');\n    body?.classList.add(MOBILE_CLASSNAME);\n  } catch {\n    // noop\n  }\n};\n\nconst removeClassNameFromBody = () => {\n  try {\n    const body = document.querySelector('body');\n    body?.classList.remove(MOBILE_CLASSNAME);\n  } catch {\n    // noop\n  }\n};\n\nconst MediaQueryProvider = (props: MediaQueryProviderProps): React.ReactElement => {\n  const {\n    children,\n    logger,\n  } = props;\n  const breakpoint = props?.breakpoint || false;\n  const [isMobile, setIsMobile] = useState(false);\n  useEffect(() => {\n    const updateSize = () => {\n      if (typeof breakpoint === 'boolean') {\n        setIsMobile(breakpoint);\n        if (breakpoint) {\n          logger?.info?.('MediaQueryProvider: isMobile: true');\n          addClassNameToBody();\n        } else {\n          logger?.info?.('MediaQueryProvider: isMobile: false');\n          removeClassNameFromBody();\n        }\n      } else {\n        const mq = window.matchMedia(`(max-width: ${breakpoint})`);\n        logger?.info?.(`MediaQueryProvider: Screensize updated to ${breakpoint}`);\n        if (mq.matches) {\n          setIsMobile(true);\n          addClassNameToBody();\n          logger?.info?.('MediaQueryProvider: isMobile: true');\n        } else {\n          setIsMobile(false);\n          removeClassNameFromBody();\n          logger?.info?.('MediaQueryProvider: isMobile: false');\n        }\n      }\n    };\n    updateSize();\n    window.addEventListener('resize', updateSize);\n    logger?.info?.('MediaQueryProvider: addEventListener', { updateSize });\n    return () => {\n      window.removeEventListener('resize', updateSize);\n      logger?.info?.('MediaQueryProvider: removeEventListener', { updateSize });\n    };\n  }, [breakpoint]);\n  return (\n    <MediaQueryContext.Provider value={{ breakpoint, isMobile }}>\n      {children}\n    </MediaQueryContext.Provider>\n  );\n};\n\nconst useMediaQueryContext: useMediaQueryContextType = () => React.useContext(MediaQueryContext);\n\nexport { MediaQueryProvider, useMediaQueryContext };\n"],"names":["DEFAULT_MOBILE","MOBILE_CLASSNAME","MediaQueryContext","React","createContext","breakpoint","isMobile","addClassNameToBody","body","document","querySelector","classList","add","_a","removeClassNameFromBody","remove","MediaQueryProvider","props","children","logger","useState","setIsMobile","useEffect","updateSize","info","call","_b","mq","window","matchMedia","concat","_c","matches","_d","_e","addEventListener","removeEventListener","createElement","Provider","value","useMediaQueryContext","useContext"],"mappings":"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"}