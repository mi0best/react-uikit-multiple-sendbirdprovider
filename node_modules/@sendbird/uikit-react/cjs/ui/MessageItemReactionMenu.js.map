{"version":3,"file":"MessageItemReactionMenu.js","sources":["../../../src/ui/MessageItemReactionMenu/index.tsx"],"sourcesContent":["import './index.scss';\nimport React, { ReactElement, useRef } from 'react';\nimport type { Reaction } from '@sendbird/chat/message';\nimport type { Emoji, EmojiContainer } from '@sendbird/chat';\n\nimport ContextMenu, { EmojiListItems } from '../ContextMenu';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport IconButton from '../IconButton';\nimport ImageRenderer from '../ImageRenderer';\nimport ReactionButton from '../ReactionButton';\nimport { getClassName, getEmojiListAll, isPendingMessage, isFailedMessage, SendableMessageType } from '../../utils';\nimport { SpaceFromTriggerType } from '../../types';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: SendableMessageType;\n  userId: string;\n  spaceFromTrigger?: SpaceFromTriggerType;\n  emojiContainer?: EmojiContainer;\n  toggleReaction?: (message: SendableMessageType, reactionKey: string, isReacted: boolean) => void;\n  setSupposedHover?: (bool: boolean) => void;\n}\n\nexport default function MessageItemReactionMenu({\n  className,\n  message,\n  userId,\n  spaceFromTrigger = { x: 0, y: 0 },\n  emojiContainer,\n  toggleReaction,\n  setSupposedHover,\n}: Props): ReactElement {\n  const triggerRef = useRef(null);\n  const containerRef = useRef(null);\n\n  if (isPendingMessage(message) || isFailedMessage(message)) {\n    return null;\n  }\n\n  return (\n    <div\n      className={getClassName([className, 'sendbird-message-item-reaction-menu'])}\n      ref={containerRef}\n    >\n      <ContextMenu\n        menuTrigger={(toggleDropdown: () => void): ReactElement => (\n          <IconButton\n            className=\"sendbird-message-item-reaction-menu__trigger\"\n            ref={triggerRef}\n            width=\"32px\"\n            height=\"32px\"\n            onClick={(): void => {\n              toggleDropdown();\n              setSupposedHover(true);\n            }}\n            onBlur={(): void => {\n              setSupposedHover(false);\n            }}\n          >\n            <Icon\n              className=\"sendbird-message-item-reaction-menu__trigger__icon\"\n              type={IconTypes.EMOJI_MORE}\n              fillColor={IconColors.CONTENT_INVERSE}\n              width=\"24px\"\n              height=\"24px\"\n            />\n          </IconButton>\n        )}\n        menuItems={(close: () => void): ReactElement => {\n          const closeDropdown = (): void => {\n            close();\n            setSupposedHover(false);\n          };\n          return (\n            <EmojiListItems\n              parentRef={triggerRef}\n              parentContainRef={containerRef}\n              closeDropdown={closeDropdown}\n              spaceFromTrigger={spaceFromTrigger}\n            >\n              {getEmojiListAll(emojiContainer).map((emoji: Emoji): ReactElement => {\n                const isReacted: boolean = message?.reactions\n                  ?.filter((reaction: Reaction) => reaction.key === emoji.key)[0]?.userIds\n                  ?.some((reactorId: string) => reactorId === userId);\n                return (\n                  <ReactionButton\n                    key={emoji.key}\n                    width=\"36px\"\n                    height=\"36px\"\n                    selected={isReacted}\n                    onClick={() => {\n                      closeDropdown();\n                      toggleReaction(message, emoji.key, isReacted);\n                    }}\n                    dataSbId={`ui_emoji_reactions_menu_${emoji.key}`}\n                  >\n                    <ImageRenderer\n                      url={emoji.url}\n                      width=\"28px\"\n                      height=\"28px\"\n                      placeHolder={(style) => (\n                        <div style={style}>\n                          <Icon\n                            type={IconTypes.QUESTION}\n                            fillColor={IconColors.ON_BACKGROUND_3}\n                            width=\"28px\"\n                            height=\"28px\"\n                          />\n                        </div>\n                      )}\n                    />\n                  </ReactionButton>\n                );\n              })}\n            </EmojiListItems>\n          );\n        }}\n      />\n    </div>\n  );\n}\n"],"names":["MessageItemReactionMenu","_a","className","message","userId","_b","spaceFromTrigger","x","y","emojiContainer","toggleReaction","setSupposedHover","triggerRef","useRef","containerRef","isPendingMessage","isFailedMessage","React","createElement","getClassName","ref","ContextMenu","menuTrigger","toggleDropdown","IconButton","width","height","onClick","onBlur","Icon","type","IconTypes","EMOJI_MORE","fillColor","IconColors","CONTENT_INVERSE","menuItems","close","closeDropdown","EmojiListItems","parentRef","parentContainRef","getEmojiListAll","map","emoji","isReacted","_c","reactions","filter","reaction","key","userIds","some","reactorId","ReactionButton","selected","dataSbId","concat","ImageRenderer","url","placeHolder","style","QUESTION","ON_BACKGROUND_3"],"mappings":"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"}