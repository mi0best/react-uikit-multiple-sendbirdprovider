{"version":3,"file":"OpenchannelOGMessage.js","sources":["../../../src/ui/OpenchannelOGMessage/utils.ts","../../../src/ui/OpenchannelOGMessage/index.tsx"],"sourcesContent":["import type { UserMessage } from '@sendbird/chat/message';\n\nexport const URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\nexport const createUrlTester = (regexp: RegExp) => (text: string): boolean => regexp.test(text);\nexport const checkOGIsEnalbed = (message: UserMessage): boolean => {\n  const { ogMetaData } = message;\n  if (!ogMetaData) {\n    return false;\n  }\n  const { url } = ogMetaData;\n  if (!url) {\n    return false;\n  }\n  return true;\n};\n","import React, { useState, useContext, useMemo, useRef, useEffect } from 'react';\nimport { UserMessage } from '@sendbird/chat/message';\nimport format from 'date-fns/format';\nimport './index.scss';\n\nimport Avatar from '../Avatar';\nimport ContextMenu, { MenuItems, MenuItem } from '../ContextMenu';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport IconButton from '../IconButton';\nimport ImageRenderer from '../ImageRenderer';\nimport LinkLabel from '../LinkLabel';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Loader from '../Loader';\nimport UserProfile from '../UserProfile';\nimport { UserProfileContext } from '../../lib/UserProfileContext';\n\nimport uuidv4 from '../../utils/uuid';\nimport { copyToClipboard } from '../OpenchannelUserMessage/utils';\nimport { useLocalization } from '../../lib/LocalizationContext';\nimport { checkOGIsEnalbed } from './utils';\nimport {\n  checkIsPending,\n  checkIsFailed,\n  isFineCopy,\n  isFineEdit,\n  isFineResend,\n  isFineDelete,\n  showMenuTrigger,\n  getSenderFromMessage,\n} from '../../utils/openChannelUtils';\nimport { useMediaQueryContext } from '../../lib/MediaQueryContext';\nimport useLongPress from '../../hooks/useLongPress';\nimport OpenChannelMobileMenu from '../OpenChannelMobileMenu';\nimport TextFragment from '../../modules/Message/components/TextFragment';\nimport { tokenizeMessage } from '../../modules/Message/utils/tokens/tokenize';\n\ninterface OpenChannelOGMessageProps {\n  message: UserMessage;\n  isOperator?: boolean;\n  isEphemeral?: boolean;\n  className?: string | Array<string>;\n  disabled?: boolean;\n  showEdit(bool: boolean): void;\n  showRemove(bool: boolean): void;\n  resendMessage(message: UserMessage): void;\n  chainTop?: boolean;\n  chainBottom?: boolean;\n  userId: string;\n}\n\nexport default function OpenchannelOGMessage({\n  message,\n  isOperator,\n  isEphemeral = false,\n  className,\n  disabled,\n  showEdit,\n  showRemove,\n  resendMessage,\n  chainTop,\n  userId,\n}: OpenChannelOGMessageProps): JSX.Element {\n  const status = message?.sendingStatus;\n  const ogMetaData = message.ogMetaData ?? null;\n  const defaultImage = ogMetaData?.defaultImage;\n  const { stringSet, dateLocale } = useLocalization();\n  const { isMobile } = useMediaQueryContext();\n\n  const { disableUserProfile, renderUserProfile } = useContext(UserProfileContext);\n  const [contextStyle, setContextStyle] = useState({});\n  const [showContextMenu, setShowContextMenu] = useState(false);\n\n  const openLink = () => {\n    if (checkOGIsEnalbed(message) && ogMetaData?.url) {\n      window.open(ogMetaData.url, '_blank', 'noopener,noreferrer');\n    }\n  };\n\n  const onLongPress = useLongPress({\n    onLongPress: () => setShowContextMenu(true),\n    onClick: openLink,\n  }, {\n    delay: 300,\n  });\n\n  const messageComponentRef = useRef(null);\n  const contextMenuRef = useRef(null);\n  const mobileMenuRef = useRef(null);\n  const avatarRef = useRef(null);\n\n  const isPending = checkIsPending(status);\n  const isFailed = checkIsFailed(status);\n  const sender = getSenderFromMessage(message);\n\n  const tokens = useMemo(() => {\n    return tokenizeMessage({\n      messageText: message.message,\n    });\n  }, [message?.updatedAt]);\n\n  // place conxt menu top depending clientHeight of message component\n  useEffect(() => {\n    if (messageComponentRef?.current?.clientHeight > 36) {\n      setContextStyle({ top: '8px ' });\n    } else {\n      setContextStyle({ top: '2px' });\n    }\n  }, [window.innerWidth]);\n\n  if (!message || message.messageType !== 'user') {\n    return <></>;\n  }\n\n  return (\n    <>\n      <div\n        className={[\n          ...(Array.isArray(className) ? className : [className]),\n          'sendbird-openchannel-og-message',\n        ].join(' ')}\n        ref={messageComponentRef}\n        {...(isMobile ? { ...onLongPress } : {})}\n      >\n        <div\n          className=\"sendbird-openchannel-og-message__top\"\n        >\n          <div className=\"sendbird-openchannel-og-message__top__left\">\n            {\n              !chainTop && (\n                <ContextMenu\n                  menuTrigger={(toggleDropdown) => (\n                    <Avatar\n                      className=\"sendbird-openchannel-og-message__top__left__avatar\"\n                      src={sender.profileUrl || ''}\n                      ref={avatarRef}\n                      width=\"28px\"\n                      height=\"28px\"\n                      onClick={() => {\n                        if (!disableUserProfile) {\n                          toggleDropdown();\n                        }\n                      }}\n                    />\n                  )}\n                  menuItems={(closeDropdown) => (\n                    <MenuItems\n                      parentRef={avatarRef}\n                      parentContainRef={avatarRef}\n                      closeDropdown={closeDropdown}\n                      style={{ paddingTop: '0px', paddingBottom: '0px' }}\n                    >\n                      {\n                        renderUserProfile\n                          ? (\n                            renderUserProfile({\n                              user: sender,\n                              close: closeDropdown,\n                              currentUserId: userId,\n                            })\n                          )\n                          : (\n                            <UserProfile\n                              user={sender}\n                              onSuccess={closeDropdown}\n                              disableMessaging\n                            />\n                          )\n                      }\n                    </MenuItems>\n                  )}\n                />\n              )\n            }\n          </div>\n          <div className=\"sendbird-openchannel-og-message__top__right\">\n            {\n              !chainTop && (\n                <div className=\"sendbird-openchannel-og-message__top__right__title\">\n                  <Label\n                    className=\"sendbird-openchannel-og-message__top__right__title__sender-name\"\n                    type={LabelTypography.CAPTION_2}\n                    color={isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2}\n                  >\n                    {\n                      sender && (\n                        sender.friendName\n                        || sender.nickname\n                        || sender.userId\n                      )\n                    }\n                  </Label>\n                  <Label\n                    className=\"sendbird-openchannel-og-message__top__right__title__sent-at\"\n                    type={LabelTypography.CAPTION_3}\n                    color={LabelColors.ONBACKGROUND_3}\n                  >\n                    {\n                      message?.createdAt && (\n                        format(message?.createdAt, 'p', {\n                          locale: dateLocale,\n                        })\n                      )\n                    }\n                  </Label>\n                </div>\n              )\n            }\n            <div className=\"sendbird-openchannel-og-message__top__right__description\">\n              <Label\n                className=\"sendbird-openchannel-og-message__top__right__description__message\"\n                type={LabelTypography.BODY_1}\n                color={LabelColors.ONBACKGROUND_1}\n              >\n                <TextFragment tokens={tokens} />\n                {\n                  ((message?.updatedAt ?? 0) > 0) && (\n                    <Label\n                      key={uuidv4()}\n                      className='sendbird-openchannel-og-message--word'\n                      type={LabelTypography.BODY_1}\n                      color={LabelColors.ONBACKGROUND_2}\n                    >\n                      {stringSet.MESSAGE_EDITED}\n                    </Label>\n                  )\n                }\n              </Label>\n            </div>\n          </div>\n          {\n            !isMobile && (\n              <div\n                className=\"sendbird-openchannel-og-message__top__context-menu\"\n                ref={contextMenuRef}\n                style={contextStyle}\n              >\n                <ContextMenu\n                  menuTrigger={(toggleDropdown) => (\n                    showMenuTrigger({ message: message, userId: userId, status: status }) && (\n                      <IconButton\n                        className=\"sendbird-openchannel-og-message__top__context-menu--icon\"\n                        width=\"32px\"\n                        height=\"32px\"\n                        onClick={() => {\n                          toggleDropdown();\n                        }}\n                      >\n                        <Icon\n                          type={IconTypes.MORE}\n                          fillColor={IconColors.CONTENT_INVERSE}\n                          width=\"24px\"\n                          height=\"24px\"\n                        />\n                      </IconButton>\n                    )\n                  )}\n                  menuItems={(closeDropdown) => (\n                    <MenuItems\n                      parentRef={contextMenuRef}\n                      parentContainRef={contextMenuRef}\n                      closeDropdown={closeDropdown}\n                      openLeft\n                    >\n                      {\n                        isFineCopy({ message, userId, status }) && (\n                          <MenuItem\n                            className=\"sendbird-openchannel-og-message__top__context-menu__copy\"\n                            onClick={() => {\n                              copyToClipboard(message.message);\n                              closeDropdown();\n                            }}\n                            dataSbId=\"open_channel_og_message_menu_copy\"\n                          >\n                            {stringSet.CONTEXT_MENU_DROPDOWN__COPY}\n                          </MenuItem>\n                        )\n                      }\n                      {\n                        (!isEphemeral && isFineEdit({ message, userId, status })) && (\n                          <MenuItem\n                            className=\"sendbird-openchannel-og-message__top__context-menu__edit\"\n                            onClick={() => {\n                              if (disabled) {\n                                return;\n                              }\n                              showEdit(true);\n                              closeDropdown();\n                            }}\n                            dataSbId=\"open_channel_og_message_menu_edit\"\n                          >\n                            {stringSet.CONTEXT_MENU_DROPDOWN__EDIT}\n                          </MenuItem>\n                        )\n                      }\n                      {\n                        isFineResend({ message, userId, status }) && (\n                          <MenuItem\n                            className=\"sendbird-openchannel-og-message__top__context-menu__resend\"\n                            onClick={() => {\n                              resendMessage(message);\n                              closeDropdown();\n                            }}\n                            dataSbId=\"open_channel_og_message_menu_resend\"\n                          >\n                            {stringSet.CONTEXT_MENU_DROPDOWN__RESEND}\n                          </MenuItem>\n                        )\n                      }\n                      {\n                        (!isEphemeral && isFineDelete({ message, userId, status })) && (\n                          <MenuItem\n                            className=\"sendbird-openchannel-og-message__top__context-menu__delete\"\n                            onClick={() => {\n                              if (disabled) {\n                                return;\n                              }\n                              showRemove(true);\n                              closeDropdown();\n                            }}\n                            dataSbId=\"open_channel_og_message_menu_delete\"\n                          >\n                            {stringSet.CONTEXT_MENU_DROPDOWN__DELETE}\n                          </MenuItem>\n                        )\n                      }\n                    </MenuItems>\n                  )}\n                />\n              </div>\n            )\n          }\n        </div>\n        <div className=\"sendbird-openchannel-og-message__bottom\">\n          <div className=\"sendbird-openchannel-og-message__bottom__og-tag\" ref={mobileMenuRef}>\n            {\n              ogMetaData.url && (\n                <Label\n                  className=\"sendbird-openchannel-og-message__bottom__og-tag__url\"\n                  type={LabelTypography.CAPTION_3}\n                  color={LabelColors.ONBACKGROUND_2}\n                >\n                  {ogMetaData.url}\n                </Label>\n              )\n            }\n            {\n              ogMetaData.title && (\n                <LinkLabel\n                  className=\"sendbird-openchannel-og-message__bottom__og-tag__title\"\n                  src={ogMetaData.url}\n                  type={LabelTypography.SUBTITLE_2}\n                  color={LabelColors.PRIMARY}\n                >\n                  {\n                    ogMetaData.title\n                  }\n                </LinkLabel>\n              )\n            }\n            {\n              ogMetaData.description && (\n                <Label\n                  className=\"sendbird-openchannel-og-message__bottom__og-tag__description\"\n                  type={LabelTypography.BODY_2}\n                  color={LabelColors.ONBACKGROUND_1}\n                >\n                  {ogMetaData.description}\n                </Label>\n              )\n            }\n            {\n              ogMetaData.url && (\n                <div\n                  className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail\"\n                  role=\"button\"\n                  onClick={openLink}\n                  onKeyDown={openLink}\n                  tabIndex={0}\n                >\n                  {\n                    defaultImage && (\n                      <ImageRenderer\n                        className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image\"\n                        url={defaultImage.url || ''}\n                        alt={defaultImage.alt || ''}\n                        height=\"189px\"\n                        defaultComponent={(\n                          <div className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder\">\n                            <Icon\n                              type={IconTypes.THUMBNAIL_NONE}\n                              width=\"56px\"\n                              height=\"56px\"\n                            />\n                          </div>\n                        )}\n                      />\n                    )\n                  }\n                </div>\n              )\n            }\n          </div>\n          {\n            (isPending || isFailed) && (\n              <div className=\"sendbird-openchannel-og-message__top__right__tail\">\n                {\n                  isPending && (\n                    <Loader\n                      width=\"16px\"\n                      height=\"16px\"\n                    >\n                      <Icon\n                        className=\"sendbird-openchannel-og-message__top__right__tail__pending\"\n                        type={IconTypes.SPINNER}\n                        fillColor={IconColors.PRIMARY}\n                        width=\"16px\"\n                        height=\"16px\"\n                      />\n                    </Loader>\n                  )\n                }\n                {\n                  isFailed && (\n                    <Icon\n                      className=\"sendbird-openchannel-og-message__top__right__tail__failed\"\n                      type={IconTypes.ERROR}\n                      fillColor={IconColors.ERROR}\n                      width=\"16px\"\n                      height=\"16px\"\n                    />\n                  )\n                }\n              </div>\n            )\n          }\n        </div>\n      </div>\n      {\n        showContextMenu && (\n          <OpenChannelMobileMenu\n            message={message}\n            parentRef={mobileMenuRef}\n            hideMenu={() => {\n              setShowContextMenu(false);\n            }}\n            showRemove={() => {\n              setShowContextMenu(false);\n              showRemove(true);\n            }}\n            showEdit={() => {\n              setShowContextMenu(false);\n              showEdit(true);\n            }}\n            copyToClipboard={() => {\n              setShowContextMenu(false);\n              copyToClipboard(message?.message);\n            }}\n            resendMessage={() => {\n              setShowContextMenu(false);\n              resendMessage(message);\n            }}\n          />\n        )\n      }\n    </>\n  );\n}\n"],"names":["checkOGIsEnalbed","message","ogMetaData","url","OpenchannelOGMessage","_a","isOperator","_d","isEphemeral","className","disabled","showEdit","showRemove","resendMessage","chainTop","userId","status","sendingStatus","_b","defaultImage","_e","useLocalization","stringSet","dateLocale","isMobile","useMediaQueryContext","_f","useContext","UserProfileContext","disableUserProfile","renderUserProfile","_g","useState","contextStyle","setContextStyle","_h","showContextMenu","setShowContextMenu","openLink","window","open","onLongPress","useLongPress","onClick","delay","messageComponentRef","useRef","contextMenuRef","mobileMenuRef","avatarRef","isPending","checkIsPending","isFailed","checkIsFailed","sender","getSenderFromMessage","tokens","useMemo","tokenizeMessage","messageText","updatedAt","useEffect","current","clientHeight","top","innerWidth","messageType","React","createElement","Fragment","_extends","__spreadArray","Array","isArray","join","ref","__assign","ContextMenu","menuTrigger","toggleDropdown","Avatar","src","profileUrl","width","height","menuItems","closeDropdown","MenuItems","parentRef","parentContainRef","style","paddingTop","paddingBottom","user","close","currentUserId","UserProfile","onSuccess","disableMessaging","Label","type","LabelTypography","CAPTION_2","color","LabelColors","SECONDARY_3","ONBACKGROUND_2","friendName","nickname","CAPTION_3","ONBACKGROUND_3","createdAt","format","locale","BODY_1","ONBACKGROUND_1","TextFragment","_c","key","uuidv4","MESSAGE_EDITED","showMenuTrigger","IconButton","Icon","IconTypes","MORE","fillColor","IconColors","CONTENT_INVERSE","openLeft","isFineCopy","MenuItem","copyToClipboard","dataSbId","CONTEXT_MENU_DROPDOWN__COPY","isFineEdit","CONTEXT_MENU_DROPDOWN__EDIT","isFineResend","CONTEXT_MENU_DROPDOWN__RESEND","isFineDelete","CONTEXT_MENU_DROPDOWN__DELETE","title","LinkLabel","SUBTITLE_2","PRIMARY","description","BODY_2","role","onKeyDown","tabIndex","ImageRenderer","alt","defaultComponent","THUMBNAIL_NONE","Loader","SPINNER","ERROR","OpenChannelMobileMenu","hideMenu"],"mappings":"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"}