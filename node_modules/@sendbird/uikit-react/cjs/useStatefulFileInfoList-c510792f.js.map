{"version":3,"file":"useStatefulFileInfoList-c510792f.js","sources":["../../src/ui/ImageGrid/index.tsx","../../src/ui/MultipleFilesMessageItemBody/const.ts","../../src/ui/MultipleFilesMessageItemBody/index.tsx","../../src/modules/Channel/context/hooks/useThreadMessageKindKeySelector.ts","../../src/utils/createStatefulFileInfoList.ts","../../src/modules/Channel/context/hooks/useStatefulFileInfoList.ts"],"sourcesContent":["import React, { ReactElement } from 'react';\nimport './index.scss';\nimport { getClassName } from '../../utils';\nimport { MultipleFilesMessage } from '@sendbird/chat/message';\n\ninterface ImageGridProps {\n  children: ReactElement[];\n  className?: string;\n  message: MultipleFilesMessage;\n  isReactionEnabled?: boolean;\n}\n\nexport default function ImageGrid({\n  children,\n  className,\n  message,\n  isReactionEnabled,\n}: ImageGridProps): ReactElement {\n  return (\n    <div className='sendbird-image-grid-wrap'>\n      <div className={getClassName([\n        className,\n        'sendbird-image-grid',\n        (isReactionEnabled && message?.reactions?.length > 0) ? 'reactions' : '',\n      ])}>\n        { children }\n      </div>\n    </div>\n  );\n}\n","const GRID_WIDTH_CHAT_WEB = 400;\nconst GRID_SIDE_PADDING = 8;\nconst GRID_GAP = 4;\nconst TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN = 54;\nconst PROFILE_IMAGE_WIDTH = 40;\n\nconst CHAT_MOBILE_SIDE_PADDING = 48;\n\nconst THREAD_PARENT_WIDTH = 320;\nconst THREAD_PARENT_SIDE_PADDING = 28;\nconst THREAD_PARENT_GRID_MARGIN_LEFT = 12;\n\nconst THREAD_CHILD_WIDTH = 200;\nconst THREAD_CHILD_SIDE_PADDING = 8;\nconst THREAD_CHILD_MOBILE_SIDE_PADDING = 32;\nconst THREAD_CHILD_MOBILE_TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN = 60;\n\nexport const MULTIPLE_FILES_IMAGE_SIDE_LENGTH = {\n  CHAT_WEB: `calc(${GRID_WIDTH_CHAT_WEB / 2}px - ${(GRID_SIDE_PADDING + GRID_GAP) / 2}px)`,\n  CHAT_MOBILE: `calc(50vw - ${(CHAT_MOBILE_SIDE_PADDING + PROFILE_IMAGE_WIDTH + TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN + GRID_SIDE_PADDING + GRID_GAP) / 2}px)`,\n  THREAD_PARENT_WEB: `calc(${(THREAD_PARENT_WIDTH - (THREAD_PARENT_SIDE_PADDING + PROFILE_IMAGE_WIDTH + THREAD_PARENT_GRID_MARGIN_LEFT + GRID_GAP)) / 2}px)`,\n  THREAD_PARENT_MOBILE: `calc(50vw - ${(THREAD_PARENT_SIDE_PADDING + PROFILE_IMAGE_WIDTH + THREAD_PARENT_GRID_MARGIN_LEFT + GRID_GAP) / 2}px)`,\n  THREAD_CHILD_WEB: `calc(${(THREAD_CHILD_WIDTH - THREAD_CHILD_SIDE_PADDING - GRID_GAP) / 2}px)`,\n  THREAD_CHILD_MOBILE: `calc(50vw - ${(THREAD_CHILD_MOBILE_SIDE_PADDING + PROFILE_IMAGE_WIDTH + THREAD_CHILD_MOBILE_TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN + GRID_SIDE_PADDING + GRID_GAP) / 2}px)`,\n};\nexport const MULTIPLE_FILES_IMAGE_BORDER_RADIUS = {\n  CHAT_WEB: '6px',\n  CHAT_MOBILE: '6px',\n  THREAD_PARENT_WEB: '6px',\n  THREAD_PARENT_MOBILE: '6px',\n  THREAD_CHILD_WEB: '6px',\n  THREAD_CHILD_MOBILE: '6px',\n};\nexport const MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH = '34px';\n","import React, { ReactElement, useState } from 'react';\n\nimport Icon, { IconColors, IconTypes } from '../Icon';\nimport { MultipleFilesMessage, SendingStatus } from '@sendbird/chat/message';\nimport ImageRenderer, { getBorderRadiusForMultipleImageRenderer } from '../ImageRenderer';\nimport ImageGrid from '../ImageGrid';\nimport FileViewer from '../FileViewer';\nimport './index.scss';\nimport {\n  MULTIPLE_FILES_IMAGE_BORDER_RADIUS,\n  MULTIPLE_FILES_IMAGE_SIDE_LENGTH,\n  MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH,\n} from './const';\nimport { isGif } from '../../utils';\nimport { StatefulFileInfo } from '../../utils/createStatefulFileInfoList';\n\nexport const ThreadMessageKind = {\n  PARENT: 'parent',\n  CHILD: 'child',\n} as const;\n\nexport type ThreadMessageKindType = typeof ThreadMessageKind[keyof typeof ThreadMessageKind];\n\ninterface Props {\n  className?: string;\n  message: MultipleFilesMessage;\n  isByMe?: boolean;\n  mouseHover?: boolean;\n  isReactionEnabled?: boolean;\n  truncateLimit?: number;\n  threadMessageKindKey?: string;\n  statefulFileInfoList?: StatefulFileInfo[];\n}\n\nexport default function MultipleFilesMessageItemBody({\n  className,\n  message,\n  isReactionEnabled = false,\n  threadMessageKindKey,\n  statefulFileInfoList = [],\n}: Props): ReactElement {\n  const [currentFileViewerIndex, setCurrentFileViewerIndex] = useState(-1);\n\n  function onClose() {\n    setCurrentFileViewerIndex(-1);\n  }\n\n  function onClickLeft() {\n    setCurrentFileViewerIndex(\n      currentFileViewerIndex === 0\n        ? statefulFileInfoList.length - 1\n        : currentFileViewerIndex - 1,\n    );\n  }\n\n  function onClickRight() {\n    setCurrentFileViewerIndex(\n      currentFileViewerIndex === statefulFileInfoList.length - 1\n        ? 0\n        : currentFileViewerIndex + 1,\n    );\n  }\n\n  return threadMessageKindKey && (\n    <>\n      {\n        currentFileViewerIndex > -1 && (\n          <FileViewer\n            message={message}\n            statefulFileInfoList={statefulFileInfoList}\n            currentIndex={currentFileViewerIndex}\n            onClickLeft={onClickLeft}\n            onClickRight={onClickRight}\n            onClose={onClose}\n          />\n        )\n      }\n      <ImageGrid\n        className={className}\n        message={message}\n        isReactionEnabled={isReactionEnabled}\n      >\n        {\n          statefulFileInfoList.map((fileInfo: StatefulFileInfo, index: number) => {\n            const isGifValue = isGif(fileInfo.mimeType);\n            return <div\n              className='sendbird-multiple-files-image-renderer-wrapper'\n              onClick={\n                message.sendingStatus === SendingStatus.SUCCEEDED\n                  ? () => setCurrentFileViewerIndex(index)\n                  : undefined\n              }\n              key={`sendbird-multiple-files-image-renderer-${index}-${fileInfo.url}`}\n            >\n              <ImageRenderer\n                url={fileInfo.url}\n                fixedSize={false}\n                width={MULTIPLE_FILES_IMAGE_SIDE_LENGTH[threadMessageKindKey]}\n                maxSideLength={MULTIPLE_FILES_IMAGE_SIDE_LENGTH.CHAT_WEB}\n                height={MULTIPLE_FILES_IMAGE_SIDE_LENGTH[threadMessageKindKey]}\n                borderRadius={getBorderRadiusForMultipleImageRenderer(\n                  MULTIPLE_FILES_IMAGE_BORDER_RADIUS[threadMessageKindKey],\n                  index,\n                  statefulFileInfoList.length,\n                )}\n                shadeOnHover={true}\n                isUploaded={!!fileInfo.isUploaded}\n                placeHolder={\n                  (style_: Record<string, any>) => (\n                    <div\n                      className=\"sendbird-multiple-files-image-renderer__thumbnail__placeholder\"\n                      style={style_}\n                    >\n                      {\n                        isGifValue\n                          ? <div className=\"sendbird-multiple-files-image-renderer__thumbnail__placeholder__icon\">\n                            <Icon\n                              type={IconTypes.GIF}\n                              fillColor={IconColors.THUMBNAIL_ICON}\n                              width={MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH}\n                              height={MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH}\n                            />\n                          </div>\n                          : <Icon\n                            type={IconTypes.PHOTO}\n                            fillColor={IconColors.ON_BACKGROUND_2}\n                            width={MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH}\n                            height={MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH}\n                          />\n                      }\n                    </div>\n                  )\n                }\n                defaultComponent={\n                  <div className=\"sendbird-multiple-files-image-renderer__thumbnail__placeholder\">\n                    {\n                      <Icon\n                        type={IconTypes.THUMBNAIL_NONE}\n                        fillColor={IconColors.ON_BACKGROUND_2}\n                        width={MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH}\n                        height={MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH}\n                      />\n                    }\n                  </div>\n                }\n              />\n            </div>;\n          })\n        }\n      </ImageGrid>\n    </>\n  );\n}\n","import { useMemo } from 'react';\nimport { ThreadMessageKind, ThreadMessageKindType } from '../../../../ui/MultipleFilesMessageItemBody';\nimport { match } from 'ts-pattern';\n\ninterface DynamicSideLengthProps {\n  threadMessageKind?: ThreadMessageKindType;\n  isMobile: boolean;\n}\n\nexport function useThreadMessageKindKeySelector({\n  threadMessageKind,\n  isMobile,\n}: DynamicSideLengthProps): string {\n  const threadMessageKindKey = useMemo(() => {\n    return match(threadMessageKind)\n      .with(ThreadMessageKind.PARENT, () => (isMobile\n        ? 'THREAD_PARENT_MOBILE'\n        : 'THREAD_PARENT_WEB'\n      ))\n      .with(ThreadMessageKind.CHILD, () => (isMobile\n        ? 'THREAD_CHILD_MOBILE'\n        : 'THREAD_CHILD_WEB'\n      ))\n      .otherwise(() => (isMobile\n        ? 'CHAT_MOBILE'\n        : 'CHAT_WEB'\n      ));\n  }, [isMobile, threadMessageKind]);\n  return threadMessageKindKey;\n}\n","import { MultipleFilesMessage, SendingStatus, UploadableFileInfo, UploadedFileInfo } from '@sendbird/chat/message';\nimport { Thumbnail } from '@sendbird/chat/lib/__definition';\n\nexport type StatefulFileInfo = {\n  fileName?: string,\n  fileSize?: number,\n  mimeType?: string,\n  thumbnails?: Thumbnail[];\n  url?: string,\n  isUploaded?: boolean;\n};\n\nexport function createStatefulFileInfoList(message: MultipleFilesMessage, oldStatefulFileInfoList: StatefulFileInfo[]): StatefulFileInfo[] {\n  if (!message) return null;\n\n  // Handle sent messages.\n  if (message.sendingStatus === SendingStatus.SUCCEEDED) {\n    return message.fileInfoList.map((fileInfo: UploadedFileInfo) => {\n      return {\n        fileName: fileInfo.fileName,\n        fileSize: fileInfo.fileSize,\n        mimeType: fileInfo.mimeType,\n        thumbnails: fileInfo.thumbnails,\n        url: fileInfo.url,\n        isUploaded: true,\n      };\n    });\n  }\n  // Handle unsent message.\n  if (!Array.isArray(message.messageParams?.fileInfoList)) return null;\n  return message.messageParams.fileInfoList\n    .map((fileInfo: UploadableFileInfo, index: number): StatefulFileInfo => ({\n      fileName: fileInfo.fileName,\n      fileSize: fileInfo.fileSize,\n      mimeType: fileInfo.mimeType,\n      /**\n       * Note here, we prioritize using fileUrl (implying uploaded state) over file.\n       * This is necessary because cache loaded pending/failed mfms is mixed with\n       * files (not yet uploaded ones) and fileUrls (uploaded).\n       *\n       * Notice that if file is used in the old state, it will not be replace with the new fileUrl\n       * because doing so will rerender the ImageRenderer component which makes rendering process awkward and slow.\n       * */\n      url: oldStatefulFileInfoList[index]?.url ?? fileInfo.fileUrl ?? (\n        fileInfo.file instanceof Blob\n          ? URL.createObjectURL(fileInfo.file)\n          : undefined\n      ),\n      /**\n       * Side note: It was a bad design to not include this property by SDK.\n       * Because if original object has fileUrl set and no file, then uploaded result remains\n       * the same so customer cannot know whether it has been uploaded or not.\n       */\n      isUploaded: !fileInfo.file && typeof fileInfo.fileUrl === 'string' && fileInfo.fileUrl.length > 0,\n    }));\n}\n","import { useEffect, useState } from 'react';\nimport { MultipleFilesMessage, UploadableFileInfo } from '@sendbird/chat/message';\nimport { createStatefulFileInfoList, StatefulFileInfo } from '../../../../utils/createStatefulFileInfoList';\nimport { CoreMessageType, isMultipleFilesMessage } from '../../../../utils';\n\nexport const useStatefulFileInfoList = (message: CoreMessageType): StatefulFileInfo[] => {\n  const [statefulFileInfoList, setStatefulFileInfoList] = useState<StatefulFileInfo[]>([]);\n\n  useEffect(() => {\n    if (isMultipleFilesMessage(message)) {\n      const newStatefulFileInfoList: StatefulFileInfo[] = createStatefulFileInfoList(\n        message as MultipleFilesMessage,\n        statefulFileInfoList,\n      );\n      setStatefulFileInfoList(newStatefulFileInfoList);\n    }\n  }, [\n    // Sent message dependency.\n    (message as MultipleFilesMessage).fileInfoList?.length,\n    // Unsent message dependency.\n    /**\n     * Side note: It was a bad design to not include 'isUploaded' property by SDK.\n     * Because if original object has fileUrl set and no file, then uploaded result remains\n     * the same so customer cannot know whether it has been uploaded or not.\n     */\n    (message as MultipleFilesMessage).messageParams?.fileInfoList\n      ?.map((fileInfo: UploadableFileInfo) => fileInfo.fileUrl).join(','),\n  ]);\n  return statefulFileInfoList;\n};\n"],"names":["ImageGrid","_a","children","className","message","isReactionEnabled","React","createElement","getClassName","_b","reactions","length","GRID_WIDTH_CHAT_WEB","GRID_SIDE_PADDING","GRID_GAP","TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN","PROFILE_IMAGE_WIDTH","CHAT_MOBILE_SIDE_PADDING","THREAD_PARENT_WIDTH","THREAD_PARENT_SIDE_PADDING","THREAD_PARENT_GRID_MARGIN_LEFT","THREAD_CHILD_WIDTH","THREAD_CHILD_SIDE_PADDING","THREAD_CHILD_MOBILE_SIDE_PADDING","THREAD_CHILD_MOBILE_TIMESTAMP_WIDTH_AND_ITS_SIDE_MARGIN","MULTIPLE_FILES_IMAGE_SIDE_LENGTH","CHAT_WEB","concat","CHAT_MOBILE","THREAD_PARENT_WEB","THREAD_PARENT_MOBILE","THREAD_CHILD_WEB","THREAD_CHILD_MOBILE","MULTIPLE_FILES_IMAGE_BORDER_RADIUS","MULTIPLE_FILES_IMAGE_THUMBNAIL_SIDE_LENGTH","ThreadMessageKind","PARENT","CHILD","MultipleFilesMessageItemBody","threadMessageKindKey","_c","statefulFileInfoList","_d","useState","currentFileViewerIndex","setCurrentFileViewerIndex","onClose","onClickLeft","onClickRight","Fragment","FileViewer","currentIndex","map","fileInfo","index","isGifValue","isGif","mimeType","onClick","sendingStatus","SendingStatus","SUCCEEDED","undefined","key","url","ImageRenderer","fixedSize","width","maxSideLength","height","borderRadius","getBorderRadiusForMultipleImageRenderer","shadeOnHover","isUploaded","placeHolder","style_","style","Icon","type","IconTypes","GIF","fillColor","IconColors","THUMBNAIL_ICON","PHOTO","ON_BACKGROUND_2","defaultComponent","THUMBNAIL_NONE","useThreadMessageKindKeySelector","threadMessageKind","isMobile","useMemo","match","with","otherwise","createStatefulFileInfoList","oldStatefulFileInfoList","fileInfoList","fileName","fileSize","thumbnails","Array","isArray","messageParams","fileUrl","file","Blob","URL","createObjectURL","useStatefulFileInfoList","setStatefulFileInfoList","useEffect","isMultipleFilesMessage","newStatefulFileInfoList","join"],"mappings":"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"}