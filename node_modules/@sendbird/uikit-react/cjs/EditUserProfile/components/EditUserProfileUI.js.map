{"version":3,"file":"EditUserProfileUI.js","sources":["../../../../src/modules/EditUserProfile/components/EditUserProfileUI/index.tsx"],"sourcesContent":["import './edit-user-profile.scss';\n\nimport React, {\n  ReactElement,\n  useRef,\n  useState,\n  useContext,\n} from 'react';\nimport { useEditUserProfileContext } from '../../context/EditUserProfileProvider';\n\nimport Modal from '../../../../ui/Modal';\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\n\nimport Input, { InputLabel } from '../../../../ui/Input';\nimport Avatar from '../../../../ui/Avatar';\nimport Icon, { IconTypes } from '../../../../ui/Icon';\nimport { ButtonTypes } from '../../../../ui/Button';\nimport Label, { LabelColors, LabelTypography } from '../../../../ui/Label';\nimport TextButton from '../../../../ui/TextButton';\nimport { noop } from '../../../../utils/utils';\nimport { USER_ACTIONS } from '../../../../lib/dux/user/actionTypes';\n\nexport default function EditUserProfile(): ReactElement {\n  const editProfileProps = useEditUserProfileContext();\n  const store = useSendbirdStateContext();\n  const hiddenInputRef = useRef(null);\n  const inputRef = useRef(null);\n  const formRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const [currentImg, setCurrentImg] = useState(null);\n  const [newFile, setNewFile] = useState(null);\n\n  const {\n    onEditProfile,\n    onCancel,\n    onThemeChange,\n  } = editProfileProps;\n\n  const theme = store?.config?.theme || 'light';\n  const changeTheme = store?.config?.setCurrentTheme || noop;\n  const user = store?.stores?.userStore?.user;\n  const sdk = store?.stores?.sdkStore?.sdk;\n  const userDispatcher = store?.dispatchers?.userDispatcher;\n\n  return (\n    <Modal\n      titleText={stringSet.EDIT_PROFILE__TITLE}\n      submitText={stringSet.BUTTON__SAVE}\n      type={ButtonTypes.PRIMARY}\n      onCancel={onCancel}\n      isFullScreenOnMobile\n      onSubmit={() => {\n        if (user?.nickname !== '' && !inputRef.current.value) {\n          if (formRef.current.reportValidity) { // might not work in explorer\n            formRef.current.reportValidity();\n          }\n          return;\n        }\n        sdk?.updateCurrentUserInfo({\n          nickname: inputRef?.current?.value,\n          profileImage: newFile,\n        }).then((updatedUser) => {\n          userDispatcher({ type: USER_ACTIONS.UPDATE_USER_INFO, payload: updatedUser });\n          if (onEditProfile && typeof onEditProfile === 'function') {\n            onEditProfile(updatedUser);\n          }\n        });\n      }}\n    >\n      <form\n        className=\"sendbird-edit-user-profile\"\n        ref={formRef}\n        onSubmit={(e) => { e.preventDefault(); }}\n      >\n        <section className=\"sendbird-edit-user-profile__img\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__IMAGE_LABEL}\n          </InputLabel>\n          <div className=\"sendbird-edit-user-profile__img__avatar\">\n            <Avatar\n              width=\"80px\"\n              height=\"80px\"\n              src={currentImg || user?.profileUrl}\n            />\n          </div>\n          <input\n            ref={hiddenInputRef}\n            type=\"file\"\n            accept=\"image/gif, image/jpeg, image/png\"\n            style={{ display: 'none' }}\n            onChange={(e) => {\n              setCurrentImg(URL.createObjectURL(e.target.files[0]));\n              setNewFile(e.target.files[0]);\n              hiddenInputRef.current.value = '';\n            }}\n          />\n          <TextButton\n            className=\"sendbird-edit-user-profile__img__avatar-button\"\n            disableUnderline\n            onClick={() => hiddenInputRef.current.click()}\n          >\n            <Label type={LabelTypography.BUTTON_1} color={LabelColors.PRIMARY}>\n              {stringSet.EDIT_PROFILE__IMAGE_UPLOAD}\n            </Label>\n          </TextButton>\n        </section>\n        <section className=\"sendbird-edit-user-profile__name\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__NICKNAME_LABEL}\n          </InputLabel>\n          <Input\n            required={user?.nickname !== ''}\n            name=\"sendbird-edit-user-profile__name__input\"\n            ref={inputRef}\n            value={user?.nickname}\n            placeHolder={stringSet.EDIT_PROFILE__NICKNAME_PLACEHOLDER}\n          />\n        </section>\n        <section className=\"sendbird-edit-user-profile__userid\">\n          <InputLabel>\n            {/*  userID */}\n            {stringSet.EDIT_PROFILE__USERID_LABEL}\n          </InputLabel>\n          <Input\n            disabled\n            name=\"sendbird-edit-user-profile__userid__input\"\n            value={user?.userId}\n          />\n        </section>\n        <section className=\"sendbird-edit-user-profile__theme\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__THEME_LABEL}\n          </InputLabel>\n          <div className=\"sendbird-edit-user-profile__theme__theme-icon\">\n            {\n              theme === 'dark'\n                ? (\n                  <Icon\n                    onClick={() => {\n                      changeTheme('light');\n                      onThemeChange?.('light');\n                      // if (onThemeChange && typeof onThemeChange === 'function') {\n                      //   onThemeChange('light');\n                      // }\n                    }}\n                    type={IconTypes.TOGGLE_ON}\n                    width={44}\n                    height={24}\n                  />\n                )\n                : (\n                  <Icon\n                    onClick={() => {\n                      changeTheme('dark');\n                      onThemeChange?.('dark');\n                      // if (onThemeChange && typeof onThemeChange === 'function') {\n                      //   onThemeChange('dark');\n                      // }\n                    }}\n                    type={IconTypes.TOGGLE_OFF}\n                    width={44}\n                    height={24}\n                  />\n                )\n            }\n          </div>\n        </section>\n      </form>\n    </Modal>\n  );\n}\n"],"names":["EditUserProfile","editProfileProps","useEditUserProfileContext","store","useSendbirdStateContext","hiddenInputRef","useRef","inputRef","formRef","stringSet","useContext","LocalizationContext","_h","useState","currentImg","setCurrentImg","_j","newFile","setNewFile","onEditProfile","onCancel","onThemeChange","theme","_a","config","changeTheme","_b","setCurrentTheme","noop","user","_d","_c","stores","userStore","sdk","_f","_e","sdkStore","userDispatcher","_g","dispatchers","React","createElement","Modal","titleText","EDIT_PROFILE__TITLE","submitText","BUTTON__SAVE","type","ButtonTypes","PRIMARY","isFullScreenOnMobile","onSubmit","nickname","current","value","reportValidity","updateCurrentUserInfo","profileImage","then","updatedUser","USER_ACTIONS","UPDATE_USER_INFO","payload","className","ref","e","preventDefault","InputLabel","EDIT_PROFILE__IMAGE_LABEL","Avatar","width","height","src","profileUrl","accept","style","display","onChange","URL","createObjectURL","target","files","TextButton","disableUnderline","onClick","click","Label","LabelTypography","BUTTON_1","color","LabelColors","EDIT_PROFILE__IMAGE_UPLOAD","EDIT_PROFILE__NICKNAME_LABEL","Input","required","name","placeHolder","EDIT_PROFILE__NICKNAME_PLACEHOLDER","EDIT_PROFILE__USERID_LABEL","disabled","userId","EDIT_PROFILE__THEME_LABEL","Icon","IconTypes","TOGGLE_ON","TOGGLE_OFF"],"mappings":"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"}