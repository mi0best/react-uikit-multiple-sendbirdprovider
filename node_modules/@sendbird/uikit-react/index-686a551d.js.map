{"version":3,"file":"index-686a551d.js","sources":["../src/utils/openChannelUtils.ts","../src/ui/OpenChannelMobileMenu/index.tsx"],"sourcesContent":["import type { User } from '@sendbird/chat';\nimport type { FileMessage, UserMessage } from '@sendbird/chat/message';\nimport { SendableMessageType } from './index';\n\nconst OpenChannelMessageStatusTypes = {\n  NONE: 'none',\n  PENDING: 'pending',\n  FAILED: 'failed',\n  CANCELED: 'canceled',\n  SUCCEEDED: 'succeeded',\n};\n\nexport const getSenderFromMessage = (message: SendableMessageType): User => {\n  // @ts-ignore\n  return message.sender || message._sender;\n};\n\nexport const checkIsSent = (status: string): boolean => (status === OpenChannelMessageStatusTypes.SUCCEEDED);\nexport const checkIsPending = (status: string): boolean => (status === OpenChannelMessageStatusTypes.PENDING);\nexport const checkIsFailed = (status: string): boolean => (status === OpenChannelMessageStatusTypes.FAILED);\n\nexport const checkIsByMe = (message: SendableMessageType, userId: string): boolean => (getSenderFromMessage(message).userId === userId);\n\ninterface isFineCopyParams {\n  message: UserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineCopy = ({ message }: isFineCopyParams): boolean => {\n  return (message?.messageType === 'user' && message?.message?.length > 0);\n};\n\ninterface isFineResendParams {\n  message: SendableMessageType;\n  status: string;\n  userId: string;\n}\nexport const isFineResend = ({ message, status, userId }: isFineResendParams): boolean => {\n  return checkIsByMe(message, userId)\n    && checkIsFailed(status)\n    // @ts-ignore\n    && message?.isResendable();\n};\n\ninterface isFineEditParams {\n  message: SendableMessageType;\n  status: string;\n  userId: string;\n}\nexport const isFineEdit = ({ message, status, userId }: isFineEditParams): boolean => {\n  return checkIsByMe(message, userId) && checkIsSent(status) && message?.isUserMessage?.();\n};\n\ninterface isFineDeleteParams {\n  message: SendableMessageType;\n  status: string;\n  userId: string;\n}\nexport const isFineDelete = ({ message, userId }: isFineDeleteParams): boolean => {\n  return checkIsByMe(message, userId);\n};\n\ninterface IsFineDownloadParams {\n  message: FileMessage | UserMessage;\n  status: string;\n}\n\nexport const isFineDownload = ({ message, status }: IsFineDownloadParams): boolean => {\n  if (message?.isFileMessage?.() && checkIsSent(status)) {\n    return true;\n  }\n  return false;\n};\n\ninterface showMenuTriggerParams {\n  message: SendableMessageType;\n  status: string;\n  userId: string;\n}\nexport const showMenuTrigger = (props: showMenuTriggerParams): boolean => {\n  const { message, status, userId } = props;\n  // @ts-ignore\n  if (message.messageType === 'user') {\n    return (\n      isFineDelete({ message, status, userId })\n      || isFineEdit({ message, status, userId })\n      // @ts-ignore\n      || isFineCopy({ message, status, userId })\n      || isFineResend({ message, status, userId })\n    );\n  } else {\n    return (\n      isFineDelete({ message, status, userId })\n      || isFineResend({ message, status, userId })\n    );\n  }\n};\n","import './open-channel-mobile-menu.scss';\n\nimport React from 'react';\nimport type { FileMessage, UserMessage } from '@sendbird/chat/message';\nimport ContextMenu, { MenuItems, MenuItem } from '../ContextMenu';\nimport {\n  isFineDelete,\n  isFineResend,\n  isFineCopy,\n  isFineEdit,\n  isFineDownload,\n} from '../../utils/openChannelUtils';\nimport useSendbirdStateContext from '../../hooks/useSendbirdStateContext';\nimport { useLocalization } from '../../lib/LocalizationContext';\nimport { SendableMessageType } from '../../utils';\n\ntype Props = {\n  message: SendableMessageType;\n  parentRef: React.RefObject<HTMLDivElement>;\n  resendMessage?(): void;\n  showRemove?(): void;\n  copyToClipboard?(): void;\n  showEdit?(): void;\n  hideMenu(): void;\n  isEphemeral?: boolean;\n};\n\nconst OpenChannelMobileMenu: React.FC<Props> = (props: Props) => {\n  const {\n    message,\n    parentRef,\n    resendMessage,\n    showEdit,\n    showRemove,\n    copyToClipboard,\n    hideMenu,\n    isEphemeral = false,\n  } = props;\n  const userMessage = message as UserMessage;\n  const status = message?.sendingStatus;\n  const { stringSet } = useLocalization();\n  const userId = useSendbirdStateContext()?.config?.userId;\n  const fileMessage = message as FileMessage;\n  return (\n    <ContextMenu\n      isOpen\n      menuItems={() => (\n        <MenuItems\n          className=\"sendbird-openchannel__mobile-menu\"\n          parentRef={parentRef}\n          parentContainRef={parentRef}\n          closeDropdown={hideMenu}\n        >\n          {\n            isFineCopy({ message: userMessage, userId, status }) && (\n              <MenuItem\n                className=\"sendbird-openchannel-og-message__top__context-menu__copy\"\n                onClick={() => {\n                  copyToClipboard();\n                }}\n                dataSbId=\"open_channel_mobile_context_menu_copy\"\n              >\n                <>{stringSet.CONTEXT_MENU_DROPDOWN__COPY}</>\n              </MenuItem>\n            )\n          }\n          {\n            (!isEphemeral && isFineEdit({ message, userId, status })) && (\n              <MenuItem\n                className=\"sendbird-openchannel-og-message__top__context-menu__edit\"\n                onClick={() => {\n                  showEdit();\n                }}\n                dataSbId=\"open_channel_mobile_context_menu_edit\"\n              >\n                <>{stringSet.CONTEXT_MENU_DROPDOWN__EDIT}</>\n              </MenuItem>\n            )\n          }\n          {\n            isFineResend({ message, userId, status }) && (\n              <MenuItem\n                onClick={() => {\n                  resendMessage();\n                }}\n                dataSbId=\"open_channel_mobile_context_menu_resend\"\n              >\n                <>{stringSet.CONTEXT_MENU_DROPDOWN__RESEND}</>\n              </MenuItem>\n            )\n          }\n          {\n            (!isEphemeral && isFineDelete({ message, userId, status })) && (\n              <MenuItem\n                onClick={() => {\n                  showRemove();\n                }}\n                dataSbId=\"open_channel_mobile_context_menu_delete\"\n              >\n                <>{stringSet.CONTEXT_MENU_DROPDOWN__DELETE}</>\n              </MenuItem>\n            )\n          }\n          {\n            isFineDownload({ message, status }) && (\n                <MenuItem\n                  onClick={() => {\n                    hideMenu();\n                  }}\n                  dataSbId=\"open_channel_mobile_context_menu_download_file\"\n                >\n                  <a\n                    className=\"sendbird-openchannel__mobile-menu-hyperlink\"\n                    rel=\"noopener noreferrer\"\n                    href={fileMessage?.url}\n                    target=\"_blank\"\n                  >\n                    {stringSet.CONTEXT_MENU_DROPDOWN__SAVE}\n                  </a>\n                </MenuItem>\n            )\n          }\n        </MenuItems>\n      )\n    }/>\n  );\n};\n\nexport default OpenChannelMobileMenu;\n"],"names":["OpenChannelMessageStatusTypes","NONE","PENDING","FAILED","CANCELED","SUCCEEDED","getSenderFromMessage","message","sender","_sender","checkIsSent","status","checkIsPending","checkIsFailed","checkIsByMe","userId","isFineCopy","_a","messageType","_b","length","isFineResend","isResendable","isFineEdit","isUserMessage","call","isFineDelete","isFineDownload","isFileMessage","showMenuTrigger","props","OpenChannelMobileMenu","parentRef","resendMessage","showEdit","showRemove","copyToClipboard","hideMenu","_c","isEphemeral","userMessage","sendingStatus","stringSet","useLocalization","useSendbirdStateContext","config","fileMessage","React","createElement","ContextMenu","isOpen","menuItems","MenuItems","className","parentContainRef","closeDropdown","MenuItem","onClick","dataSbId","Fragment","CONTEXT_MENU_DROPDOWN__COPY","CONTEXT_MENU_DROPDOWN__EDIT","CONTEXT_MENU_DROPDOWN__RESEND","CONTEXT_MENU_DROPDOWN__DELETE","rel","href","url","target","CONTEXT_MENU_DROPDOWN__SAVE"],"mappings":"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"}