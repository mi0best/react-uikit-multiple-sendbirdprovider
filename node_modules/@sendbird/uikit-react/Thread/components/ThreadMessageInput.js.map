{"version":3,"file":"ThreadMessageInput.js","sources":["../../../src/modules/Thread/components/ThreadMessageInput/index.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { MutedState } from '@sendbird/chat/groupChannel';\n\nimport './index.scss';\n\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport MessageInput from '../../../../ui/MessageInput';\nimport { MessageInputKeys } from '../../../../ui/MessageInput/const';\nimport SuggestedMentionList from '../../../Channel/components/SuggestedMentionList';\nimport { useThreadContext } from '../../context/ThreadProvider';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\nimport VoiceMessageInputWrapper from '../../../Channel/components/MessageInput/VoiceMessageInputWrapper';\nimport { Role } from '../../../../lib/types';\nimport { useDirtyGetMentions } from '../../../Message/hooks/useDirtyGetMentions';\nimport { isDisabledBecauseFrozen, isDisabledBecauseMuted } from '../../../Channel/context/utils';\nimport { useHandleUploadFiles } from '../../../Channel/components/MessageInput/useHandleUploadFiles';\n\nexport interface ThreadMessageInputProps {\n  className?: string;\n  disabled?: boolean;\n  renderFileUploadIcon?: () => React.ReactElement;\n  renderVoiceMessageIcon?: () => React.ReactElement;\n  renderSendMessageIcon?: () => React.ReactElement;\n}\n\nconst ThreadMessageInput = (\n  props: ThreadMessageInputProps,\n  ref: React.MutableRefObject<any>,\n): React.ReactElement => {\n  const {\n    className,\n    renderFileUploadIcon,\n    renderVoiceMessageIcon,\n    renderSendMessageIcon,\n  } = props;\n  const propsDisabled = props.disabled;\n  const { config } = useSendbirdStateContext();\n  const { stringSet } = useLocalization();\n  const {\n    isMentionEnabled,\n    isOnline,\n    userMention,\n    isVoiceMessageEnabled,\n    logger,\n  } = config;\n  const threadContext = useThreadContext();\n  const {\n    currentChannel,\n    parentMessage,\n    sendMessage,\n    sendFileMessage,\n    sendVoiceMessage,\n    sendMultipleFilesMessage,\n    isMuted,\n    isChannelFrozen,\n    allThreadMessages,\n  } = threadContext;\n  const messageInputRef = useRef();\n  const isMultipleFilesMessageEnabled = (\n    threadContext.isMultipleFilesMessageEnabled\n    ?? config.isMultipleFilesMessageEnabled\n  );\n\n  const disabled = propsDisabled\n    || isMuted\n    || (!(currentChannel?.myRole === Role.OPERATOR) && isChannelFrozen) || parentMessage === null;\n\n  // MFM\n  const [handleUploadFiles] = useHandleUploadFiles({\n    sendFileMessage,\n    sendMultipleFilesMessage,\n    quoteMessage: parentMessage,\n  }, {\n    logger,\n  });\n\n  // mention\n  const [mentionNickname, setMentionNickname] = useState('');\n  const [mentionedUsers, setMentionedUsers] = useState([]);\n  const [mentionedUserIds, setMentionedUserIds] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [mentionSuggestedUsers, setMentionSuggestedUsers] = useState([]);\n  const [messageInputEvent, setMessageInputEvent] = useState(null);\n  const [showVoiceMessageInput, setShowVoiceMessageInput] = useState(false);\n  const displaySuggestedMentionList = isOnline\n    && isMentionEnabled\n    && mentionNickname.length > 0\n    && !isDisabledBecauseFrozen(currentChannel)\n    && !isDisabledBecauseMuted(currentChannel)\n    && !currentChannel?.isBroadcast;\n\n  // Reset when changing channel\n  useEffect(() => {\n    setShowVoiceMessageInput(false);\n  }, [currentChannel?.url]);\n\n  const mentionNodes = useDirtyGetMentions({ ref: ref || messageInputRef }, { logger });\n  const ableMention = mentionNodes?.length < userMention?.maxMentionCount;\n\n  useEffect(() => {\n    setMentionedUsers(mentionedUsers.filter(({ userId }) => {\n      const i = mentionedUserIds.indexOf(userId);\n      if (i < 0) {\n        return false;\n      } else {\n        mentionedUserIds.splice(i, 1);\n        return true;\n      }\n    }));\n  }, [mentionedUserIds]);\n\n  if (currentChannel?.isBroadcast && currentChannel?.myRole !== Role.OPERATOR) {\n    return null;\n  }\n\n  return (\n    <div className={`sendbird-thread-message-input${showVoiceMessageInput ? '--voice-message' : ''} ${className}`}>\n      {\n        displaySuggestedMentionList && (\n          <SuggestedMentionList\n            targetNickname={mentionNickname}\n            inputEvent={messageInputEvent}\n            // renderUserMentionItem={renderUserMentionItem}\n            onUserItemClick={(user) => {\n              if (user) {\n                setMentionedUsers([...mentionedUsers, user]);\n              }\n              setMentionNickname('');\n              setSelectedUser(user);\n              setMessageInputEvent(null);\n            }}\n            onFocusItemChange={() => {\n              setMessageInputEvent(null);\n            }}\n            onFetchUsers={(users) => {\n              setMentionSuggestedUsers(users);\n            }}\n            ableAddMention={ableMention}\n            maxMentionCount={userMention?.maxMentionCount}\n            maxSuggestionCount={userMention?.maxSuggestionCount}\n          />\n        )\n      }\n      {\n        showVoiceMessageInput\n          ? (\n            <VoiceMessageInputWrapper\n              channel={currentChannel}\n              onSubmitClick={(recordedFile, duration) => {\n                sendVoiceMessage(recordedFile, duration, parentMessage);\n                setShowVoiceMessageInput(false);\n              }}\n              onCancelClick={() => {\n                setShowVoiceMessageInput(false);\n              }}\n            />\n          )\n          : (\n            <MessageInput\n              className=\"sendbird-thread-message-input__message-input\"\n              messageFieldId=\"sendbird-message-input-text-field--thread\"\n              disabled={disabled}\n              channel={currentChannel}\n              setMentionedUsers={setMentionedUsers}\n              channelUrl={currentChannel?.url}\n              mentionSelectedUser={selectedUser}\n              isMentionEnabled={isMentionEnabled}\n              isVoiceMessageEnabled={isVoiceMessageEnabled}\n              isSelectingMultipleFilesEnabled={isMultipleFilesMessageEnabled}\n              onVoiceMessageIconClick={() => {\n                setShowVoiceMessageInput(true);\n              }}\n              renderFileUploadIcon={renderFileUploadIcon}\n              renderVoiceMessageIcon={renderVoiceMessageIcon}\n              renderSendMessageIcon={renderSendMessageIcon}\n              ref={ref || messageInputRef}\n              placeholder={\n                (currentChannel?.isFrozen && !(currentChannel?.myRole === Role.OPERATOR) && stringSet.MESSAGE_INPUT__PLACE_HOLDER__DISABLED)\n                || (currentChannel?.myMutedState === MutedState.MUTED && stringSet.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT)\n                || (allThreadMessages.length > 0\n                  ? stringSet.THREAD__INPUT__REPLY_TO_THREAD\n                  : stringSet.THREAD__INPUT__REPLY_IN_THREAD\n                )\n              }\n              onStartTyping={() => {\n                currentChannel?.startTyping?.();\n              }}\n              onSendMessage={({ message, mentionTemplate }) => {\n                sendMessage({\n                  message: message,\n                  mentionedUsers,\n                  mentionTemplate: mentionTemplate,\n                  quoteMessage: parentMessage,\n                });\n                setMentionNickname('');\n                setMentionedUsers([]);\n                currentChannel?.endTyping?.();\n              }}\n              onFileUpload={handleUploadFiles}\n              onUserMentioned={(user) => {\n                if (selectedUser?.userId === user?.userId) {\n                  setSelectedUser(null);\n                  setMentionNickname('');\n                }\n              }}\n              onMentionStringChange={(mentionText) => {\n                setMentionNickname(mentionText);\n              }}\n              onMentionedUserIdsUpdated={(userIds) => {\n                setMentionedUserIds(userIds);\n              }}\n              onKeyDown={(e) => {\n                if (displaySuggestedMentionList && mentionSuggestedUsers?.length > 0\n                  && ((e.key === MessageInputKeys.Enter && ableMention) || e.key === MessageInputKeys.ArrowUp || e.key === MessageInputKeys.ArrowDown)\n                ) {\n                  setMessageInputEvent(e);\n                  return true;\n                }\n                return false;\n              }}\n            />\n          )\n      }\n    </div>\n  );\n};\n\nexport default React.forwardRef(ThreadMessageInput);\n"],"names":["ThreadMessageInput","props","ref","className","renderFileUploadIcon","renderVoiceMessageIcon","renderSendMessageIcon","propsDisabled","disabled","config","useSendbirdStateContext","stringSet","useLocalization","isMentionEnabled","isOnline","userMention","isVoiceMessageEnabled","logger","threadContext","useThreadContext","currentChannel","parentMessage","sendMessage","sendFileMessage","sendVoiceMessage","sendMultipleFilesMessage","isMuted","isChannelFrozen","allThreadMessages","messageInputRef","useRef","isMultipleFilesMessageEnabled","_a","myRole","Role","OPERATOR","handleUploadFiles","useHandleUploadFiles","quoteMessage","_b","useState","mentionNickname","setMentionNickname","_c","mentionedUsers","setMentionedUsers","_d","mentionedUserIds","setMentionedUserIds","_e","selectedUser","setSelectedUser","_f","mentionSuggestedUsers","setMentionSuggestedUsers","_g","messageInputEvent","setMessageInputEvent","_h","showVoiceMessageInput","setShowVoiceMessageInput","displaySuggestedMentionList","length","isDisabledBecauseFrozen","isDisabledBecauseMuted","isBroadcast","useEffect","url","mentionNodes","useDirtyGetMentions","ableMention","maxMentionCount","filter","userId","i","indexOf","splice","React","createElement","concat","SuggestedMentionList","targetNickname","inputEvent","onUserItemClick","user","__spreadArray","onFocusItemChange","onFetchUsers","users","ableAddMention","maxSuggestionCount","VoiceMessageInputWrapper","channel","onSubmitClick","recordedFile","duration","onCancelClick","MessageInput","messageFieldId","channelUrl","mentionSelectedUser","isSelectingMultipleFilesEnabled","onVoiceMessageIconClick","placeholder","isFrozen","MESSAGE_INPUT__PLACE_HOLDER__DISABLED","myMutedState","MutedState","MUTED","MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT","THREAD__INPUT__REPLY_TO_THREAD","THREAD__INPUT__REPLY_IN_THREAD","onStartTyping","startTyping","onSendMessage","message","mentionTemplate","endTyping","onFileUpload","onUserMentioned","onMentionStringChange","mentionText","onMentionedUserIdsUpdated","userIds","onKeyDown","e","key","MessageInputKeys","Enter","ArrowUp","ArrowDown","forwardRef"],"mappings":"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"}