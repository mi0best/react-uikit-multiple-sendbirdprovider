{"version":3,"file":"UserListItem.js","sources":["../../src/ui/UserListItem/index.tsx"],"sourcesContent":["import React, { ChangeEvent, MutableRefObject, ReactElement, useContext } from 'react';\nimport { User } from '@sendbird/chat';\nimport { Member } from '@sendbird/chat/groupChannel';\nimport './index.scss';\n\nimport { UserProfileContext } from '../../lib/UserProfileContext';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport Avatar from '../Avatar/index';\nimport MutedAvatarOverlay from '../Avatar/MutedAvatarOverlay';\nimport Checkbox from '../Checkbox';\nimport UserProfile from '../UserProfile';\nimport ContextMenu, { MenuItems } from '../ContextMenu';\nimport Label, { LabelTypography, LabelColors } from '../Label';\n\nexport interface UserListItemProps {\n  user: User;\n  className?: string;\n  checked?: boolean;\n  checkBox?: boolean;\n  isOperator?: boolean;\n  disabled?: boolean;\n  disableMessaging?: boolean;\n  currentUser?: string;\n  action?({ actionRef, parentRef }: {\n    actionRef: MutableRefObject<any>,\n    parentRef?: MutableRefObject<any>,\n  }): ReactElement;\n  onChange?(e: ChangeEvent<HTMLInputElement>): void;\n  avatarSize?: string;\n  onClick?(): void,\n}\n\nexport default function UserListItem({\n  user,\n  className,\n  checked,\n  checkBox,\n  isOperator,\n  disabled,\n  disableMessaging,\n  currentUser,\n  action,\n  onChange,\n  avatarSize = '40px',\n  onClick,\n}: UserListItemProps): ReactElement {\n  const uniqueKey = user.userId;\n  const actionRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const avatarRef = React.useRef(null);\n  const { disableUserProfile, renderUserProfile } = useContext(UserProfileContext);\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-user-list-item',\n      ].join(' ')}\n      ref={parentRef}\n    >\n      {\n        (user as Member)?.isMuted && (\n          <MutedAvatarOverlay height={40} width={40} />\n        )\n      }\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <Avatar\n            className=\"sendbird-user-list-item__avatar\"\n            ref={avatarRef}\n            src={user.profileUrl}\n            width={avatarSize}\n            height={avatarSize}\n            onClick={() => {\n              if (!disableUserProfile) {\n                toggleDropdown();\n                onClick?.();\n              }\n            }}\n          />\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            openLeft\n            parentRef={avatarRef}\n            // for catching location(x, y) of MenuItems\n            parentContainRef={avatarRef}\n            // for toggling more options(menus & reactions)\n            closeDropdown={closeDropdown}\n            style={{ paddingTop: '0px', paddingBottom: '0px' }}\n          >\n            {\n              renderUserProfile\n                ? renderUserProfile({\n                  user,\n                  currentUserId: currentUser,\n                  close: closeDropdown,\n                })\n                : (\n                  <UserProfile\n                    disableMessaging={disableMessaging}\n                    user={user}\n                    currentUserId={currentUser}\n                    onSuccess={closeDropdown}\n                  />\n                )\n            }\n          </MenuItems>\n        )}\n      />\n      <Label\n        className=\"sendbird-user-list-item__title\"\n        type={LabelTypography.SUBTITLE_1}\n        color={LabelColors.ONBACKGROUND_1}\n      >\n        {user.nickname || stringSet.NO_NAME}\n        {\n          (currentUser === user.userId) && (\n            ' (You)'\n          )\n        }\n      </Label>\n      { // if there is now nickname, display userId\n        !user.nickname && (\n          <Label\n            className=\"sendbird-user-list-item__subtitle\"\n            type={LabelTypography.CAPTION_3}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {user.userId}\n          </Label>\n        )\n      }\n      {\n        checkBox && (\n          <label\n            className=\"sendbird-user-list-item__checkbox\"\n            htmlFor={uniqueKey}\n          >\n            <Checkbox\n              id={uniqueKey}\n              checked={checked}\n              disabled={disabled}\n              onChange={(event) => onChange(event)}\n            />\n          </label>\n        )\n      }\n      {\n        isOperator && (\n          <Label\n            className={[\n              'sendbird-user-list-item__operator',\n              checkBox ? 'checkbox' : '',\n            ].join(' ')}\n            type={LabelTypography.SUBTITLE_2}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            Operator\n          </Label>\n        )\n      }\n      {\n        action && (\n          <div\n            className=\"sendbird-user-list-item__action\"\n            ref={actionRef}\n          >\n            {action({ actionRef, parentRef })}\n          </div>\n        )\n      }\n    </div>\n  );\n}\n"],"names":["UserListItem","_a","user","className","checked","checkBox","isOperator","disabled","disableMessaging","currentUser","action","onChange","_b","avatarSize","onClick","uniqueKey","userId","actionRef","React","useRef","parentRef","avatarRef","_c","useContext","UserProfileContext","disableUserProfile","renderUserProfile","stringSet","LocalizationContext","createElement","__spreadArray","Array","isArray","join","ref","isMuted","MutedAvatarOverlay","height","width","ContextMenu","menuTrigger","toggleDropdown","Avatar","src","profileUrl","menuItems","closeDropdown","MenuItems","openLeft","parentContainRef","style","paddingTop","paddingBottom","currentUserId","close","UserProfile","onSuccess","Label","type","LabelTypography","SUBTITLE_1","color","LabelColors","ONBACKGROUND_1","nickname","NO_NAME","CAPTION_3","ONBACKGROUND_2","htmlFor","Checkbox","id","event","SUBTITLE_2"],"mappings":"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"}