{"version":3,"file":"Word.js","sources":["../../src/ui/Word/index.tsx"],"sourcesContent":["/**\n * @deprecated  This component is deprecated and will be removed in the next major version.\n * Use TextFragment instead.\n */\nimport './index.scss';\nimport React from 'react';\nimport type { UserMessage } from '@sendbird/chat/message';\n\nimport { LabelTypography } from '../Label';\nimport LinkLabel from '../LinkLabel';\nimport uuidv4 from '../../utils/uuid';\nimport { convertWordToStringObj, StringObjType, StringObj } from '../../utils';\nimport MentionLabel from '../MentionLabel';\n\ninterface WordProps {\n  word: string;\n  message: UserMessage;\n  isByMe?: boolean;\n  mentionTemplate?: string;\n  renderString?: (stringObj: StringObj) => JSX.Element;\n}\n\n// Word and StringObj will include types: normal, mention, url\nexport default function Word(props: WordProps): JSX.Element {\n  const {\n    word,\n    message,\n    isByMe = false,\n    mentionTemplate = '@',\n    renderString = null,\n  } = props;\n  if (word === '') {\n    return null;\n  }\n  return (\n    <span className=\"sendbird-word\">\n      {\n        convertWordToStringObj(word, message?.mentionedUsers).map((stringObj) => {\n          const type = stringObj?.type || '';\n          const value = stringObj?.value || '';\n          const userId = stringObj?.userId || '';\n          if (renderString && typeof renderString === 'function') {\n            return renderString(stringObj);\n          }\n          if (type === StringObjType.mention) {\n            return (\n              <MentionLabel\n                mentionTemplate={mentionTemplate}\n                mentionedUserId={userId}\n                mentionedUserNickname={value}\n                key={uuidv4()}\n                isByMe={isByMe}\n              />\n            );\n          } else if (type === StringObjType.url) {\n            const urlRegex = /([a-zA-Z0-9]+:\\/\\/)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?(\\/.*)?/;\n            const targetUrl = value.match(urlRegex)?.[0];\n            const stringUrl = { front: '', url: '', back: '' };\n            if (targetUrl) {\n              const targetUrlIndex = value.indexOf(targetUrl);\n              if (targetUrlIndex > 0) {\n                stringUrl.front = value.slice(0, targetUrlIndex);\n              }\n              stringUrl.url = value.slice(targetUrlIndex, targetUrlIndex + targetUrl.length);\n              if (targetUrlIndex + targetUrl.length < value.length) {\n                stringUrl.back = value.slice(targetUrlIndex + targetUrl.length);\n              }\n            }\n            if (targetUrl) {\n              return [\n                stringUrl.front ? stringUrl.front : '',\n                stringUrl.url ? (\n                  <LinkLabel\n                    className=\"sendbird-word__url\"\n                    key={uuidv4()}\n                    src={stringUrl.url}\n                    type={LabelTypography.BODY_1}\n                  >\n                    {stringUrl.url}\n                  </LinkLabel>\n                ) : null,\n                stringUrl.back ? stringUrl.back : '',\n              ];\n            }\n            return (\n              <LinkLabel\n                className=\"sendbird-word__url\"\n                key={uuidv4()}\n                src={word}\n                type={LabelTypography.BODY_1}\n              >\n                {value}\n              </LinkLabel>\n            );\n          } else {\n            return value;\n          }\n        })\n      }\n    </span>\n  );\n}\n"],"names":["Word","props","word","message","_a","isByMe","_b","mentionTemplate","_c","renderString","React","createElement","className","convertWordToStringObj","mentionedUsers","map","stringObj","type","value","userId","StringObjType","mention","MentionLabel","mentionedUserId","mentionedUserNickname","key","uuidv4","url","urlRegex","targetUrl","match","stringUrl","front","back","targetUrlIndex","indexOf","slice","length","LinkLabel","src","LabelTypography","BODY_1"],"mappings":"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"}