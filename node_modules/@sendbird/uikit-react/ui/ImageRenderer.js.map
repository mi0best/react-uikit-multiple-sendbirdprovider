{"version":3,"file":"ImageRenderer.js","sources":["../../src/utils/numberToPx.ts","../../src/ui/ImageRenderer/utils.ts","../../src/ui/ImageRenderer/useDynamicSideLength.ts","../../src/ui/ImageRenderer/index.tsx"],"sourcesContent":["export default (value: string | number): string => {\n  return typeof value === 'number' ? `${value}px` : value;\n};\n","import numberToPx from '../../utils/numberToPx';\n\nexport function getDynamicMinLengthInPx(\n  sideLength: string | number,\n  maxSideLength: string | null,\n  defaultMinLength: string,\n): string {\n  return `min(${maxSideLength ?? defaultMinLength}, ${numberToPx(sideLength) ?? defaultMinLength})`;\n}\n","import { useMemo } from 'react';\nimport { getDynamicMinLengthInPx } from './utils';\n\ninterface DynamicSideLengthProps {\n  width: string | number;\n  height: string | number;\n  maxSideLength: string | null;\n  defaultMinLength: string\n}\n\nexport function useDynamicSideLength({\n  width,\n  height,\n  maxSideLength,\n  defaultMinLength,\n}: DynamicSideLengthProps): string[] {\n\n  const dynamicMinWidth = useMemo(() => {\n    return getDynamicMinLengthInPx(width, maxSideLength, defaultMinLength);\n  }, [width]);\n\n  const dynamicMinHeight = useMemo(() => {\n    return getDynamicMinLengthInPx(height, maxSideLength, defaultMinLength);\n  }, [height]);\n\n  return [dynamicMinWidth, dynamicMinHeight];\n}\n","import React, { useState, useMemo, ReactElement } from 'react';\n\nimport './index.scss';\nimport numberToPx from '../../utils/numberToPx';\nimport { useDynamicSideLength } from './useDynamicSideLength';\n\n/*\n  ImageRenderer displays image with url or source\n  it checks if the source exist with img tag first\n  if it exists onLoad is called, if not onError is called\n  and those properties switch img tag to real purposing element\n*/\n\nexport function getBorderRadiusForImageRenderer(\n  circle = false,\n  borderRadius: string | number = null,\n): string {\n  return circle ? '50%' : numberToPx(borderRadius);\n}\n\nexport function getBorderRadiusForMultipleImageRenderer(\n  borderRadius: string | number,\n  index: number,\n  totalCount: number,\n): string {\n  const value: number = parseInt(borderRadius);\n  const lastIndex: number = totalCount - 1;\n  const topLeft: string = index === 0 ? value * 2 : value;\n  const topRight: string = index === 1 ? value * 2 : value;\n  const bottomRight: string = index === lastIndex ? value * 2 : value;\n  const bottomLeft: string = index === lastIndex - 1 ? value * 2 : value;\n  return `${topLeft}px ${topRight}px ${bottomRight}px ${bottomLeft}px`;\n}\n\nexport interface ImageRendererProps {\n  className?: string | Array<string>;\n  url: string;\n  alt?: string;\n  width?: string | number;\n  maxSideLength?: string;\n  height?: string | number;\n  circle?: boolean;\n  fixedSize?: boolean;\n  placeHolder?: ((props: { style: { [key: string]: string | number } }) => ReactElement) | ReactElement;\n  defaultComponent?: (() => ReactElement) | ReactElement;\n  borderRadius?: string | number;\n  onLoad?: () => void;\n  onError?: () => void;\n  shadeOnHover?: boolean;\n  isUploaded?: boolean;\n}\n\nconst ImageRenderer = ({\n  className = '',\n  url,\n  alt = '',\n  width = null,\n  maxSideLength = null,\n  height = null,\n  circle = false,\n  fixedSize = false,\n  placeHolder = null,\n  defaultComponent = null,\n  borderRadius = null,\n  onLoad = () => { /* noop */ },\n  onError = () => { /* noop */ },\n  shadeOnHover,\n  isUploaded = true,\n}: ImageRendererProps): ReactElement => {\n  const [showDefaultComponent, setShowDefaultComponent] = useState(false);\n  const [showPlaceHolder, setShowPlaceHolder] = useState(true);\n  const [dynamicMinWidth, dynamicMinHeight] = useDynamicSideLength({\n    width,\n    height,\n    maxSideLength,\n    defaultMinLength: '400px',\n  });\n  const DefaultComponent = useMemo(() => {\n    return typeof defaultComponent === 'function'\n      ? defaultComponent()\n      : defaultComponent;\n  }, [defaultComponent]);\n\n  const PlaceHolder = useMemo(() => {\n    return (placeHolder && typeof placeHolder === 'function')\n      ? placeHolder({\n        style: {\n          width: '100%',\n          minWidth: dynamicMinWidth,\n          maxWidth: fixedSize ? dynamicMinWidth : '400px',\n          height: dynamicMinHeight,\n          position: 'absolute',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        },\n      })\n      : null;\n  }, [placeHolder]);\n\n  const HiddenImageLoader = useMemo(() => {\n    setShowDefaultComponent(false);\n    // reset the state when url is changed\n    return (\n      <img\n        className=\"sendbird-image-renderer__hidden-image-loader\"\n        src={url}\n        alt={alt}\n        onLoad={() => {\n          setShowPlaceHolder(false);\n          onLoad();\n        }}\n        onError={() => {\n          setShowDefaultComponent(true);\n          onError();\n        }}\n      />\n    );\n  }, [url]);\n\n  return dynamicMinWidth && dynamicMinHeight && (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-image-renderer',\n      ].join(' ')}\n      style={{\n        width: '100%',\n        minWidth: dynamicMinWidth,\n        maxWidth: fixedSize ? dynamicMinWidth : '400px',\n        height: dynamicMinHeight,\n      }}\n    >\n      {showPlaceHolder && PlaceHolder}\n      {\n        showDefaultComponent\n          ? DefaultComponent\n          : (\n            <div\n              className=\"sendbird-image-renderer__image\"\n              style={{\n                width: '100%',\n                minWidth: dynamicMinWidth,\n                maxWidth: fixedSize ? dynamicMinWidth : '400px',\n                height: dynamicMinHeight,\n                position: 'absolute',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: 'cover',\n                backgroundImage: `url(${url})`,\n                borderRadius: getBorderRadiusForImageRenderer(circle, borderRadius),\n              }}\n            />\n          )\n      }\n      {HiddenImageLoader}\n      {\n        shadeOnHover && <div\n          className=\"sendbird-multiple-files-image-renderer__image-cover\"\n          style={{\n            ...{ borderRadius: getBorderRadiusForImageRenderer(circle, borderRadius) },\n            ...(isUploaded ? {} : { display: 'inline-flex' }),\n          }}\n        />\n      }\n    </div>\n  );\n};\n\nexport default ImageRenderer;\n"],"names":["value","concat","getDynamicMinLengthInPx","sideLength","maxSideLength","defaultMinLength","_a","numberToPx","useDynamicSideLength","width","height","dynamicMinWidth","useMemo","dynamicMinHeight","getBorderRadiusForImageRenderer","circle","borderRadius","getBorderRadiusForMultipleImageRenderer","index","totalCount","parseInt","lastIndex","topLeft","topRight","bottomRight","bottomLeft","ImageRenderer","_b","className","url","_c","alt","_d","_e","_f","_g","_h","fixedSize","_j","placeHolder","_k","defaultComponent","_l","_m","onLoad","_o","onError","shadeOnHover","_p","isUploaded","_q","useState","showDefaultComponent","setShowDefaultComponent","_r","showPlaceHolder","setShowPlaceHolder","_s","DefaultComponent","PlaceHolder","style","minWidth","maxWidth","position","display","justifyContent","alignItems","HiddenImageLoader","React","createElement","src","__spreadArray","Array","isArray","join","backgroundRepeat","backgroundPosition","backgroundSize","backgroundImage"],"mappings":"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"}