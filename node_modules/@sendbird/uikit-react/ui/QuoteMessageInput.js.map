{"version":3,"file":"QuoteMessageInput.js","sources":["../../src/ui/QuoteMessageInput/QuoteMessageThumbnail.tsx","../../src/ui/QuoteMessageInput/index.tsx"],"sourcesContent":["import React, { ReactElement } from 'react';\nimport type { FileMessage } from '@sendbird/chat/message';\n\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport ImageRenderer from '../ImageRenderer';\nimport {\n  isAudioMessage,\n  isFileMessage, isImageFileInfo,\n  isImageMessage,\n  isMultipleFilesMessage,\n  isThumbnailMessage,\n  isVideoMessage,\n  isVoiceMessage,\n} from '../../utils';\nimport { MultipleFilesMessage } from '@sendbird/chat/message';\nimport { getMessageFirstFileType, getMessageFirstFileUrl, getMessageFirstFileThumbnailUrl } from '../QuoteMessage/utils';\n\ninterface Props {\n  message: FileMessage | MultipleFilesMessage;\n}\n\nconst componentClassname = 'sendbird-quote_message_input__avatar';\n\nexport default function QuoteMessageThumbnail({ message }: Props): ReactElement {\n  if (!isFileMessage(message) && !isMultipleFilesMessage(message) || isVoiceMessage(message as FileMessage)) {\n    return null;\n  }\n  let thumbnailUrl = getMessageFirstFileThumbnailUrl(message);\n  if (!thumbnailUrl) {\n    if (\n      message.isFileMessage?.()\n      && (\n        isImageMessage(message)\n        || isVideoMessage(message)\n      )\n    ) {\n      thumbnailUrl = getMessageFirstFileUrl(message);\n    } else if (\n      message.isMultipleFilesMessage?.()\n      && (\n        message.fileInfoList.length > 0\n        && isImageFileInfo((message).fileInfoList[0])\n      )\n    ) {\n      thumbnailUrl = message.fileInfoList[0].url;\n    }\n  }\n  if (isVideoMessage(message as FileMessage) && thumbnailUrl) {\n    return (\n      <div className={componentClassname}>\n        <video\n          style={{\n            width: '44px',\n            height: '44px',\n          }}\n          src={thumbnailUrl}\n        />\n      </div>\n    );\n  } else if ((isThumbnailMessage(message) || isMultipleFilesMessage(message)) && thumbnailUrl) {\n    return (\n      <ImageRenderer\n        className={componentClassname}\n        url={thumbnailUrl}\n        alt={getMessageFirstFileType(message)}\n        width=\"44px\"\n        height=\"44px\"\n        fixedSize\n      />\n    );\n  } else if (isAudioMessage(message as FileMessage)) {\n    return (\n      <div className={componentClassname}>\n        <Icon\n          type={IconTypes.FILE_AUDIO}\n          fillColor={IconColors.ON_BACKGROUND_2}\n          width=\"24px\"\n          height=\"24px\"\n        />\n      </div>\n    );\n  } else {\n    return (\n      <div className={componentClassname}>\n        <Icon\n          type={IconTypes.FILE_DOCUMENT}\n          fillColor={IconColors.ON_BACKGROUND_2}\n          width=\"24px\"\n          height=\"24px\"\n        />\n      </div>\n    );\n  }\n}\n","import './index.scss';\n\nimport React, { ReactElement, useContext } from 'react';\nimport type { FileMessage, UserMessage } from '@sendbird/chat/message';\nimport {\n  CoreMessageType,\n  getClassName,\n  getUIKitMessageType,\n  isFileMessage,\n  isGifMessage,\n  isImageMessage,\n  isMultipleFilesMessage,\n  isUserMessage,\n  isVideoMessage,\n  isVoiceMessage, SendableMessageType,\n  UIKitMessageTypes,\n} from '../../utils';\n\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\n\nimport QuoteMessageThumbnail from './QuoteMessageThumbnail';\nimport { getMessageFirstFileName } from '../QuoteMessage/utils';\nimport { MultipleFilesMessage } from '@sendbird/chat/message';\n\ninterface Props {\n  className?: string | Array<string>;\n  replyingMessage: SendableMessageType;\n  onClose?: (message: SendableMessageType) => void;\n}\n\nexport default function QuoteMessageInput({\n  className,\n  replyingMessage,\n  onClose,\n}: Props): ReactElement {\n  const { stringSet } = useContext(LocalizationContext);\n  const fileMessage = replyingMessage as FileMessage | MultipleFilesMessage;\n  const sender = (replyingMessage as SendableMessageType)?.sender;\n  const displayFileIcon = (isFileMessage(replyingMessage) || isMultipleFilesMessage(replyingMessage))\n    && !isVoiceMessage(replyingMessage as FileMessage);\n\n  return (\n    <div className={getClassName(['sendbird-quote_message_input', className])}>\n      {\n        displayFileIcon && (\n          <QuoteMessageThumbnail message={fileMessage} />\n        )\n      }\n      <div\n        className=\"sendbird-quote_message_input__body\"\n        style={{\n          width: `calc(100% - ${displayFileIcon ? '164px' : '120px'})`,\n          left: displayFileIcon ? '92px' : '40px',\n        }}\n      >\n        <Label\n          className=\"sendbird-quote_message_input__body__sender-name\"\n          type={LabelTypography.CAPTION_1}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {`${stringSet.QUOTE_MESSAGE_INPUT__REPLY_TO} ${(sender && sender.nickname) ? sender.nickname : stringSet.NO_NAME}`}\n        </Label>\n        <Label\n          className=\"sendbird-quote_message_input__body__message-content\"\n          type={LabelTypography.BODY_2}\n          color={LabelColors.ONBACKGROUND_3}\n        >\n          {isImageMessage(fileMessage) && !isGifMessage(fileMessage) && stringSet.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE}\n          {isVideoMessage(fileMessage) && stringSet.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO}\n          {isGifMessage(fileMessage) && stringSet.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF}\n          {isUserMessage(replyingMessage as UserMessage) && (replyingMessage as UserMessage).message}\n          {getUIKitMessageType(replyingMessage) === UIKitMessageTypes.FILE && getMessageFirstFileName(fileMessage)}\n          {\n            isMultipleFilesMessage(replyingMessage as CoreMessageType)\n            && `${(fileMessage as MultipleFilesMessage).fileInfoList.length} Photos`}\n          {isVoiceMessage(replyingMessage as FileMessage) && stringSet.VOICE_MESSAGE}\n        </Label>\n      </div>\n      <Icon\n        className=\"sendbird-quote_message_input__close-button\"\n        type={IconTypes.CLOSE}\n        fillColor={IconColors.ON_BACKGROUND_2}\n        width=\"24px\"\n        height=\"24px\"\n        onClick={() => onClose(replyingMessage)}\n      />\n    </div>\n  );\n}\n"],"names":["componentClassname","QuoteMessageThumbnail","_a","message","isFileMessage","isMultipleFilesMessage","isVoiceMessage","thumbnailUrl","getMessageFirstFileThumbnailUrl","_b","call","isImageMessage","isVideoMessage","getMessageFirstFileUrl","_c","fileInfoList","length","isImageFileInfo","url","React","createElement","className","style","width","height","src","isThumbnailMessage","ImageRenderer","alt","getMessageFirstFileType","fixedSize","isAudioMessage","Icon","type","IconTypes","FILE_AUDIO","fillColor","IconColors","ON_BACKGROUND_2","FILE_DOCUMENT","QuoteMessageInput","replyingMessage","onClose","stringSet","useContext","LocalizationContext","fileMessage","sender","displayFileIcon","getClassName","concat","left","Label","LabelTypography","CAPTION_1","color","LabelColors","ONBACKGROUND_1","QUOTE_MESSAGE_INPUT__REPLY_TO","nickname","NO_NAME","BODY_2","ONBACKGROUND_3","isGifMessage","QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE","QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO","QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF","isUserMessage","getUIKitMessageType","UIKitMessageTypes","FILE","getMessageFirstFileName","VOICE_MESSAGE","CLOSE","onClick"],"mappings":";;;;;;;;;;;;;;AAqBA,IAAMA,kBAAkB,GAAG,sCAAsC,CAAA;AAEzC,SAAAC,qBAAqBA,CAACC,EAAkB,EAAA;;AAAhB,EAAA,IAAAC,OAAO,GAAAD,EAAA,CAAAC,OAAA,CAAA;AACrD,EAAA,IAAI,CAACC,aAAa,CAACD,OAAO,CAAC,IAAI,CAACE,sBAAsB,CAACF,OAAO,CAAC,IAAIG,cAAc,CAACH,OAAsB,CAAC,EAAE;AACzG,IAAA,OAAO,IAAI,CAAA;AACZ,GAAA;AACD,EAAA,IAAII,YAAY,GAAGC,+BAA+B,CAACL,OAAO,CAAC,CAAA;EAC3D,IAAI,CAACI,YAAY,EAAE;AACjB,IAAA,IACE,CAAA,CAAAE,EAAA,GAAAN,OAAO,CAACC,aAAa,MAAI,IAAA,IAAAK,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,EAAA,CAAAC,IAAA,CAAAP,OAAA,CAAA,MAEvBQ,cAAc,CAACR,OAAO,CAAC,IACpBS,cAAc,CAACT,OAAO,CAAC,CAC3B,EACD;AACAI,MAAAA,YAAY,GAAGM,sBAAsB,CAACV,OAAO,CAAC,CAAA;KAC/C,MAAM,IACL,CAAA,CAAAW,EAAA,GAAAX,OAAO,CAACE,sBAAsB,MAAI,IAAA,IAAAS,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,EAAA,CAAAJ,IAAA,CAAAP,OAAA,CAAA,KAEhCA,OAAO,CAACY,YAAY,CAACC,MAAM,GAAG,CAAC,IAC5BC,eAAe,CAAEd,OAAO,CAAEY,YAAY,CAAC,CAAC,CAAC,CAC7C,EACD;MACAR,YAAY,GAAGJ,OAAO,CAACY,YAAY,CAAC,CAAC,CAAC,CAACG,GAAG,CAAA;AAC3C,KAAA;AACF,GAAA;AACD,EAAA,IAAIN,cAAc,CAACT,OAAsB,CAAC,IAAII,YAAY,EAAE;IAC1D,oBACEY,cAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKC,MAAAA,SAAS,EAAErB,kBAAAA;KACdmB,eAAAA,cAAA,CAAAC,aAAA,CAAA,OAAA,EAAA;AACEE,MAAAA,KAAK,EAAE;AACLC,QAAAA,KAAK,EAAE,MAAM;AACbC,QAAAA,MAAM,EAAE,MAAA;OACR;AACFC,MAAAA,GAAG,EAAElB,YAAAA;AAAa,KAEtB,CAAK,CAAC,CAAA;AAET,GAAA,MAAM,IAAI,CAACmB,kBAAkB,CAACvB,OAAO,CAAC,IAAIE,sBAAsB,CAACF,OAAO,CAAC,KAAKI,YAAY,EAAE;AAC3F,IAAA,oBACEY,cAAA,CAAAC,aAAA,CAACO,aAAa,EAAA;AACZN,MAAAA,SAAS,EAAErB,kBAAmB;AAC9BkB,MAAAA,GAAG,EAAEX,YAAa;AAClBqB,MAAAA,GAAG,EAAEC,uBAAuB,CAAC1B,OAAO,CAAE;AACtCoB,MAAAA,KAAK,EAAC,MAAM;AACZC,MAAAA,MAAM,EAAC,MAAM;MACbM,SAAS,EAAA,IAAA;AAAA,KAAA,CACT,CAAA;AAEL,GAAA,MAAM,IAAIC,cAAc,CAAC5B,OAAsB,CAAC,EAAE;IACjD,oBACEgB,cAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKC,MAAAA,SAAS,EAAErB,kBAAAA;AAAmB,KAAA,eACjCmB,cAAA,CAAAC,aAAA,CAACY,IAAI,EAAA;MACHC,IAAI,EAAEC,SAAS,CAACC,UAAW;MAC3BC,SAAS,EAAEC,UAAU,CAACC,eAAgB;AACtCf,MAAAA,KAAK,EAAC,MAAM;AACZC,MAAAA,MAAM,EAAC,MAAA;AAAM,KAEjB,CAAK,CAAC,CAAA;AAET,GAAA,MAAM;IACL,oBACEL,cAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKC,MAAAA,SAAS,EAAErB,kBAAAA;AAAmB,KAAA,eACjCmB,cAAA,CAAAC,aAAA,CAACY,IAAI,EAAA;MACHC,IAAI,EAAEC,SAAS,CAACK,aAAc;MAC9BH,SAAS,EAAEC,UAAU,CAACC,eAAgB;AACtCf,MAAAA,KAAK,EAAC,MAAM;AACZC,MAAAA,MAAM,EAAC,MAAA;AAAM,KAEjB,CAAK,CAAC,CAAA;AAET,GAAA;AACH;;AC7DwB,SAAAgB,iBAAiBA,CAACtC,EAIlC,EAAA;AAHN,EAAA,IAAAmB,SAAS,eAAA;IACToB,eAAe,GAAAvC,EAAA,CAAAuC,eAAA;IACfC,OAAO,GAAAxC,EAAA,CAAAwC,OAAA,CAAA;AAEC,EAAA,IAAAC,SAAS,GAAKC,UAAU,CAACC,mBAAmB,CAAC,UAApC,CAAA;EACjB,IAAMC,WAAW,GAAGL,eAAqD,CAAA;AACzE,EAAA,IAAMM,MAAM,GAAIN,eAAuC,KAAA,IAAA,IAAvCA,eAAe,KAAf,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,eAAe,CAA0BM,MAAM,CAAA;AAC/D,EAAA,IAAMC,eAAe,GAAG,CAAC5C,aAAa,CAACqC,eAAe,CAAC,IAAIpC,sBAAsB,CAACoC,eAAe,CAAC,KAC7F,CAACnC,cAAc,CAACmC,eAA8B,CAAC,CAAA;EAEpD,oBACEtB,cAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKC,IAAAA,SAAS,EAAE4B,YAAY,CAAC,CAAC,8BAA8B,EAAE5B,SAAS,CAAC,CAAA;AAAE,GAAA,EAEtE2B,eAAe,iBACb7B,cAAA,CAAAC,aAAA,CAACnB,qBAAqB,EAAA;AAACE,IAAAA,OAAO,EAAE2C,WAAAA;AAAY,GAAA,CAC7C,eAEH3B,cAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACEC,IAAAA,SAAS,EAAC,oCAAoC;AAC9CC,IAAAA,KAAK,EAAE;AACLC,MAAAA,KAAK,EAAE,cAAe,CAAA2B,MAAA,CAAAF,eAAe,GAAG,OAAO,GAAG,OAAO,EAAG,GAAA,CAAA;AAC5DG,MAAAA,IAAI,EAAEH,eAAe,GAAG,MAAM,GAAG,MAAA;AAClC,KAAA;AAAC,GAAA,eAEF7B,cAAA,CAAAC,aAAA,CAACgC,KAAK,EAAA;AACJ/B,IAAAA,SAAS,EAAC,iDAAiD;IAC3DY,IAAI,EAAEoB,eAAe,CAACC,SAAU;IAChCC,KAAK,EAAEC,WAAW,CAACC,cAAAA;AAAe,GAAA,EAEjC,EAAA,CAAAP,MAAA,CAAGP,SAAS,CAACe,6BAA6B,EAAA,GAAA,CAAA,CAAAR,MAAA,CAAKH,MAAM,IAAIA,MAAM,CAACY,QAAQ,GAAIZ,MAAM,CAACY,QAAQ,GAAGhB,SAAS,CAACiB,OAAO,CAC3G,CACP,eAAAzC,cAAA,CAAAC,aAAA,CAACgC,KAAK,EAAA;AACJ/B,IAAAA,SAAS,EAAC,qDAAqD;IAC/DY,IAAI,EAAEoB,eAAe,CAACQ,MAAO;IAC7BN,KAAK,EAAEC,WAAW,CAACM,cAAAA;AAAe,GAAA,EAEjCnD,cAAc,CAACmC,WAAW,CAAC,IAAI,CAACiB,YAAY,CAACjB,WAAW,CAAC,IAAIH,SAAS,CAACqB,oCAAoC,EAC3GpD,cAAc,CAACkC,WAAW,CAAC,IAAIH,SAAS,CAACsB,qCAAqC,EAC9EF,YAAY,CAACjB,WAAW,CAAC,IAAIH,SAAS,CAACuB,kCAAkC,EACzEC,aAAa,CAAC1B,eAA8B,CAAC,IAAKA,eAA+B,CAACtC,OAAO,EACzFiE,mBAAmB,CAAC3B,eAAe,CAAC,KAAK4B,iBAAiB,CAACC,IAAI,IAAIC,uBAAuB,CAACzB,WAAW,CAAC,EAEtGzC,sBAAsB,CAACoC,eAAkC,CAAC,IACvD,EAAA,CAAAS,MAAA,CAAIJ,WAAoC,CAAC/B,YAAY,CAACC,MAAM,YAAS,EACzEV,cAAc,CAACmC,eAA8B,CAAC,IAAIE,SAAS,CAAC6B,aACxD,CACJ,CACL,eAAArD,cAAA,CAAAC,aAAA,CAACY,IAAI,EAAA;AACHX,IAAAA,SAAS,EAAC,4CAA4C;IACtDY,IAAI,EAAEC,SAAS,CAACuC,KAAM;IACtBrC,SAAS,EAAEC,UAAU,CAACC,eAAgB;AACtCf,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,MAAM,EAAC,MAAM;IACbkD,OAAO,EAAE,YAAM;MAAA,OAAAhC,OAAO,CAACD,eAAe,CAAC,CAAA;AAAxB,KAAA;AAAyB,GAE5C,CAAK,CAAC,CAAA;AAEV;;;;"}